<?php header('Cache-Control: max-age=31536000, public'); ?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Zone:X - Original</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link type="text/css" rel="stylesheet" href="main.css">
            <div id="allText">
                <div id="HK"></div>
                <div id="textWindow"></div>
            <script src="hotkeys.js"></script>



            <div class="navbar">
                <div class="dropdown">
                  <button class="dropbtn">Starship
                    <i class="fa fa-caret-down"></i>
                  </button>
                  <div class="dropdown-content">
                      <input type="checkbox" id="Game On" name="t"  onclick= "
                          key  = 'e';
                          callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       <label for="Game On">Game On!</label><br>
                      <input type="checkbox" id="Star Arms" name="t"  onclick= "
                          key  = '_';
                          callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       <label for="Star Arms">Star Arms!</label><br>
                       <input type="checkbox" id="Fullscreen" name="t"  onclick= "
                           key  = 'h';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                        <label for="Fullscreen">Fullscreen!</label><br>
                        <input type="checkbox" id="Verbose" name="t"  onclick= "
                            key  = 'v';
                            callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                         <label for="Verbose">Verbose!</label><br>
                       <input type="checkbox" id="Volume Speed" name="t"  onclick= "
                           key  = 'w';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                        <label for="Volume Speed">Volume Speed!</label><br>

                      <input type="checkbox" id="Touch" name="t"  onclick= "
                          key  = 't';
                          callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       <label for="Touch">Touch!</label><br>
                       <a id="Cancel Background Noise" name="t"  onclick= "

                           key  = 'p';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                           Cancel Background Noise!</a><br>
                       <a id="Listen Out" name="t"  onclick= "
                           key  = 'o';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       listen Out!</a><br>
                       <a id="Listen In" name="t"  onclick= "
                           key  = 'i';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       listen In!</a><br>


                       <a id="Faster" name="t"  onclick= "
                           key  = '+';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Faster!</a><br>
                       <a id="Slower" name="t"  onclick= "
                           key  = '-';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Slower!</a><br>
                       <a id="Reset Speed" name="t"  onclick= "
                           key  = '0';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Reset Speed!</a><br>

                  </div>
                  </div>
            </div>


                </div>

                  <script>let n = document.getElementsByName('t');
                      for(var p = 0; p<n.length;p++)n[p].checked  = false; </script>
        <div id="container"></div>
        <script src="OFFLINEonlineSwitch.js"></script>


        <script src="starshipMod.js"></script>


        <div id="score">

        <script id="osmdJS"></script> <!-- you need to provide the .js file, see README.md-->
        <div id="osmdCanvas"/>

        <input type="file" id="files"/>

        <output id="list"></output>

        <script src="fileSelectAndLoadOSMD.js"></script>

        </div id="score">

</head>
<body>
    <!--SPLASH-->
    <div class=onofflineBG id="background_wrap"></div>
    <script>
        nf = document.querySelectorAll('.onofflineBG');
        if(window.online)nf[0].style = "background-image: url('https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr@6/z1xlogo.png');"
        else nf[0].style = "background-image: url('z1xlogo.png');"
    </script>

<script id="threeJSscript" async></script>
<script id="wadJSscript" async></script>
<script src="wadLoader.js"></script>
<script src="threeJSLoader.js"async></script>

        <script id="vertexShader" type="x-shader/x-vertex">

                varying vec2 vUv;

            void main()    {

                vUv = uv;
                gl_Position = vec4( position, 1. );
            }
        </script>

        <script id="fragmentShader" type="x-shader/x-fragment">

            varying vec2 vUv;
            uniform vec2 coords;
            vec2 spunC=vec2(0.);

            uniform vec2 resolution;
            uniform float time2dance;
            uniform float volume;

            uniform float time;
            
            uniform vec2 d;

            float zin(float x){return -sin(x);}
            float coz(float x){return -cos(x);}


              vec3 face(vec2 g, vec2 t){
              float l = 1.;
              g*=2.;
              vec2 z=g.xy;
              if(g.x*g.x+g.y*g.y<40.)for (int f=0;f<21;f+=1)if(abs(z.y)>21.&&(f==1||f>3)){
                  if (f==1){l=1.;break;}
                  l=1.-length(z)/40.;//clouds and face
                  break;}
              else{
                  z=vec2(-1./(z.x*z.x-z.y*z.y-g.x),2.0*z.x*z.y-g.y);
                  l=abs(z.y)*6.;//smooths middle horn, removes some clouds
                  if(z.x>-.1)l=z.x*50.;}//face with closed small holes
              return vec3(clamp(1.-l,0.,1.));
              }


                        vec3 heart(vec2 g, vec2 t){
                            //g.x-=.5;
                            g.y*=-1.;
                            vec2 z=g.xy;
                        vec3 h=vec3(0.);
                            for (int f=0;f<60;f+=1)if(abs(z.y+z.x)>2.){h=vec3(0.);break;}
                            else {z=vec2(((z.x*z.x-z.y*z.y)-g.x+t.x),(2.0*z.x*z.y-g.y+t.y*4.));//mandelbrot loop factored into real and imaginary components from z<=z^2-g
                              h+=vec3(z.x*z.y,z.x,z.y)/21.;}
                        return h;
                        }
                                          vec3 torso(vec2 g, vec2 t){
                                          float b = 0.;
                                          vec2 z=g.xy;
                                          if(g.x*g.x+g.y*g.y<40.)if (g.x>0.)for(int f=0;f<12;f+=1)if(abs(z.y)>52.&&f>4){b=abs(z.y)/77.;break;}
                                          else{
                                              z=2.*vec2(-1./(z.x*z.x-z.y*z.y-g.x),(2.0*z.x*z.y-g.y+t.y));
                                              z.x=sqrt(abs(z.x));}
                                          return vec3(b,b/2.5,0.);
                                          }
                                          vec3 musculature(vec2 g, vec2 t){
                                          float m=0.;
                                          g.x+=.54;
                                          vec2 z=g.xy;
                                          if(g.x>1.25&&abs(g.y)<2.5)for(int f=0;f<15;f+=1)if(abs(z.y)>15.&&f>7&&f!=15){m=abs(z.y)/25.;break;}
                                          else {
                                              z=1.3*vec2(-1.5/((z.x*z.x-2.*z.y*z.y)-g.x),(1.9*z.x*z.y-1.87*g.y+t.y/4.));
                                              z.x=pow(abs(z.x),.57);}
                                          return vec3(m,m,m/2.);
                                          }
                                          vec3 robe(vec2 g, vec2 t){
                                          float r=0.;
                                          g.x+=.05;
                                          g.y/=1.14;
                                          vec2 z=g.xy;
                                          if(g.x>.5 &&abs(g.y)<1.)for(int f=0;f<70;f+=1)if(abs(z.y)>11.&&f>7){r=clamp(1.4-abs(g.x-2.3)
                                                           //*(1.-abs(g.y*g.x))-.07//(un)comment this line to toggle sleeves
                                                          ,0.,1.);break;}
                                          else{
                                              z=1.1*vec2(-2./((z.x*z.x-1.8*z.y*z.y)-g.x),(3.*z.x*z.y-1.3*g.y+t.y));;
                                              z.x=pow(abs(z.x),.8);}
                                          return vec3(r);
                                          }
                                          vec3 legs(vec2 g, vec2 t){
                                          float b=0.;
                                          g/=2.;
                                          vec2 z=g.xy;
                                          if(g.x>.75&&g.x<1.7&&abs(g.y*g.x)<.54)for(int f=0;f<8;f+=1)if(abs(z.x)>52.&&f>1){b=abs(z.x)/70.;break;}
                                          else{
                                              z=3.*vec2(-1./(z.x*z.x-z.y*z.y-g.x),77.*z.x*z.y-g.y+t.y);
                                              z.y=-1./z.y;}
                                          return vec3(b/2.,b,b/2.);
                                          }


                                                    vec3 body(vec2 p, vec2 t){return torso(p,t)+musculature(p,t)+robe(p,t)+legs(p*2.,t);}
                                                    vec3 manny(vec2 p, vec2 t){return body(p,t)+heart(p/1.5,-t)+face(p,vec2(time,0.));}


    void main(){
     vec2 p=-((vUv.yx)-.5)/(resolution.xy/max(resolution.x,resolution.y))*5.;
     vec3 m = manny(p,-d.yx/12.*(volume+1.));
    gl_FragColor=vec4(m+clamp(.5-(m.r+m.g+m.b),0.,1.),1.);}
        </script>
        <script>window.overFace=true;</script>
    </body>
</html>
