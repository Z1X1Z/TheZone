<?php header('Cache-Control: max-age=31536000, public'); ?>

<!DOCTYPE html>
<html lang="en">
    <head>
        <script>
            window.userHasGestured = false;
            </script>
        <title>Starship~Zone:X</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link type="text/css" rel="stylesheet" href="main.css">
</head>
        
        <body oncontextmenu="return false;">
            <!--disable right click solution from
                                        https://stackoverflow.com/questions/381795/how-to-disable-right-click-context-menu-in-javascript  -->
            <script src="OFFLINEonlineSwitch.js"></script>

            <script>
                var iframe = document.createElement('iframe');
                
                    let chapter = "";
                    let book = ""
                    let bookIndex = "";

                    let urlAppend = ""
                    let readerSet = false;
                    let bibleWithText = false;
                    window.muteToggle = false

                if(window.useCDN||location.hash.includes(".b")||location.hash.includes(".c("))
                {
                    if (location.hash.includes(".c("))
                    {let c = 0;
                        while (location.hash.slice(c-3,c)!=".c("&&c<location.hash.length)
                        {
                            c++;
                               }
                        while (location.hash[c]!=")"&& isNaN(location.hash[c])&&c<location.hash.length)
                        {
                        book+=location.hash[c];
                        c++;}
                        while (location.hash[c]!=")"&& !isNaN(location.hash[c])&&c<location.hash.length)
                        {
                        chapter+=location.hash[c];
                        c++;}
                    
let bookOfBooks=[
                    "Genesis",
                    "Exodus",
                    "Leviticus",
                    "Numbers",
                    "Deuteronomy",
                    "Joshua",
                    "Judges",
                    "Ruth",
                    "iSamuel",
                    "iiSamuel",
                    "iKings",
                    "iiKings",
                    "iChronicles",
                    "iiChronicles",
                    "Ezra",
                    "Nehemiah",
                    "Esther",
                    "Job",
                    "Psalms",
                    "Proverbs",
                    "Ecclesiastes",
                    "Songs",
                    "Isaiah",
                    "Jeremiah",
                    "Lamentations",
                    "Ezekiel",
                    "Daniel",
                    "Hosea",
                    "Joel",
                    "Amos",
                    "Obadiah",
                    "Jonah",
                    "Micah",
                    "Nahum",
                    "Habakkuk",
                    "Zephaniah",
                    "Haggai",
                    "Zechariah",
                    "Malachi",
                    
                    "Matthew",
                    "Mark",
                    "Luke",
                    "John",
                    "Acts",
                    "Romans",
                    "iCorinthians",
                    "iiCorinthians",
                    "Galatians",
                    "Ephesians",
                    "Philippians",
                    "Colossians",
                    "iThessalonians",
                    "iiThessalonians",
                    "iTimothy",
                    "iiTimothy",
                    "Titus",
                    "Philemon",
                    "Hebrews",
                    "James",
                    "iPeter",
                    "iiPeter",
                    "iJohn",
                    "iiJohn",
                    "iiiJohn",
                    "Jude",
                    "Revelation"
]
if(book.toLowerCase()=="songofsolomon"||book.toLowerCase()=="songofsongs")
book = "songs"

let maxLetterDepth=-1;
    for(var h = 0; h<bookOfBooks.length; h++)
    {
        let letterDepth=0;

        while(letterDepth<bookOfBooks[h].length&&letterDepth<book.length
              &&
              bookOfBooks[h][letterDepth].toLowerCase()==book[letterDepth].toLowerCase())
        {
        
            if (letterDepth>maxLetterDepth)
            {
            bookIndex = h;
            maxLetterDepth = letterDepth

            }
        letterDepth++;
        }
    }
    if (bookIndex=="") book = ""
    else
    {
        book=bookOfBooks[bookIndex].toLowerCase();

        let place = 0;
        if(book[place]=="i" && book!="isaiah"){
           while(book[place]=="i" && book!="isaiah")
            place++
        book=(place-1)+'_'+book.slice(place,book.length)
        }
}
         urlAppend = "chapter/"+book+"/"+chapter+".htm"
}
                     if (location.hash.includes(".b8"))
                    iframe.setAttribute("src", "https://openbible.com/audio/gilbert_music/");
                            else if(location.hash.includes(".b7"))   iframe.setAttribute("src","https://openbible.com/audio/gilbert_music_books/");

                            else if(location.hash.includes(".b6"))     iframe.setAttribute("src", "https://openbible.com/audio/hays/");
                            else if(location.hash.includes(".b5"))    iframe.setAttribute("src", "https://openbible.com/audio/souer/");
                            else if(location.hash.includes(".b4"))    iframe.setAttribute("src", "https://openbible.com/audio/gilbert/");
                        else if(location.hash.includes(".b3") )   iframe.setAttribute("src","https://openbible.com/audio/hays_books/");
                        else if(location.hash.includes(".b2")  )   iframe.setAttribute("src","https://openbible.com/audio/souer_books/");
                    else if(location.hash.includes(".b1")    ) iframe.setAttribute("src","https://openbible.com/audio/gilbert_books/");
                     else
                     {
                         iframe.setAttribute("src",  "https://www.biblehub.com/audio/"+urlAppend);
                         bibleWithText = true;}
                iframe.setAttribute("height", "100%");
                iframe.setAttribute("width", "50%");
                iframe.setAttribute("class", "onTOP");
                iframe.setAttribute("name", "TheBible");
                iframe.setAttribute("style","margin-left:50%;");
               // iframe.setAttribute("style", "position:fixed");
                iframe.setAttribute("Id","Bible");
                document.body.appendChild(iframe);
                if(!location.hash.includes(".c")){
                iframe.setAttribute("width", "0");
                iframe.setAttribute("height", "0");
}
               else if(!location.hash.includes(".b"))window.BibleON=0;

                }
                </script>
        <div id="load message" style="font-size:40px; background-color:blue;">     </div>

        <script>
            function loadScript(element, url, offlineURL)
            {
                // Adding the script tag to the head as suggested before
                var scriptElement = document.getElementById(element);//document.createElement("script");//
                scriptElement.type = 'text/javascript';
                scriptElement.src = url;
                //script.onreadystatechange = callback;                // Then bind the event to the callback function.  or at least that's how it goes without the stallLurker in the sonicstarship.  it's stabler. maybe
                //script.onload = callback;                // There are multiple callbacks for cross browser compatibility.
                scriptElement.onerror=function(){
                    var s = document.createElement("script");//document.getElementById('threeJSscript');
                    s.type = 'text/javascript';
                    s.src = offlineURL;
                    document.head.appendChild(s);
                    }
            }
          </script>



        
        <script id="threeJSscript"></script>
        <!--Deprecates with v160 of threejs
        <script>
        var cdnSwitchThree="three.js";
        //if (window.useCDN)cdnSwitchThree="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js";
        if (window.useCDN)cdnSwitchThree="https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr/three.min.js";
        loadScript("threeJSscript",cdnSwitchThree,"three.js")
        </script>
        -->
        <script id="shim"></script> <!-- you need to provide the .js file, see README.md-->
        <script>
        var cdnSHIM="";
        if (window.useCDN)
        {cdnSHIM="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js";
        loadScript("shim",cdnSHIM,"");
        }
        </script>
       
        <script type="importmap">
          {
            "imports": {
              "three": "https://unpkg.com/three@v0.153.0/build/three.module.js"
            }
          }
        </script>
        
        <script id="osmdJS"></script> <!-- you need to provide the .js file, see README.md-->
        <script>
        var cdnOSMD="opensheetmusicdisplayMODIFIED.min.js";
        if (window.useCDN)cdnOSMD="https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr@8/opensheetmusicdisplayMODIFIED.min.js";
        loadScript("osmdJS",cdnOSMD,"opensheetmusicdisplayMODIFIED.min.js")
        </script>
        
        <script id="wadJSscript"></script>
        <script>
        var cdnSwitchWAD="wad.min.js";
        if (window.useCDN)cdnSwitch="https://unpkg.com/web-audio-daw@4.12.0";
        
        function wrapperLurker(){
            if (userHasGestured)        loadScript("wadJSscript",cdnSwitchWAD,"wad.min.js")
            else        setTimeout(wrapperLurker,100);
        }
        if(!location.hash.includes(".f"))   wrapperLurker();
        </script>

        <!-- removing this script may fix android no load bug, but I'm testing z ordering in css        -->

        <div id="background_wrap">
   
               
           </div>

        <script>
            //splash
            let nf = document.getElementById('background_wrap');
            if(window.online)
            {
                if(Date.now()%2==1) nf.style = "background-image: url('https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr@6/z1xlogo.png');"
                else nf.style = "background-image: url('https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr/pentaloctalwtTtlzonexmonogram.jpeg');"
           }
            else
            {
                if(Date.now()%2==1)nf.style = "background-image: url('z1xlogo.png');"
                else nf.style = "background-image: url('pentaloctalwtTtlzonexmonogram.jpeg');"
                }
            
        </script>
           


    <div  id="nav" class="navbar" style="width:100%">
        
            <div id="menu" style="display:none;">

        <div >
        <div class="dropdown">
          <button  class="dropbtn">StrShp
          <div id="m1" class="dropdown-content">
              <!--https://www.w3schools.com/tags/att_input_type_number.asp this is the link for the below number code profile-->
            <!--  <label for="pitch Sample Size">pitch detection frames (1-2048):</label>
             <input type="number" id="pitch Sample Size" name="pitch Sample Size" class="num" min="1" max = "2048" onkeydown="Math.floor(fractionOfFrame=document.getElementById('pitch Sample Size').value)">
                 </p>
            -->
            <label for="ConcertKey">THE A Key Frequency (Should probably be "Concert A" 440 hz):</label>
           <input type="number" id="ConcertKey" name="ConcertKey" class="num" onkeydown="window.ConcertKey=document.getElementById('ConcertKey').value">
               <br>
               <label for="RadialWarp">Magnify rate of the octave, radially by</label>
              <input type="number" id="RadialWarp" name="RadialWarp" class="num" onkeydown="
                    let b=document.getElementById('RadialWarp').value;
                    if(!isNaN(b)&&b>0)radialWarp=1./b;">
                  <br>
                  <label for="fretCount">Fruits(max 1365)</label>
                  <input type="number" id="fretCount" name="fretCount" class="num" onkeydown="
                          number = document.getElementById('fretCount').value;
                          key  = 'a';
                          if(!isNaN(number)){
                              callKey(new KeyboardEvent('keydown', {'key':key, 'keyCode':key.charCodeAt(0)}));
                          }
                                                  ">
                      <br>
         
               
               <input type="checkbox" id="Haptic" name="t"  onclick= "window.haptic = !window.haptic; mcphrth();">
               <label for="Haptic">Haptic Song(Android only)</label>
               <br>
               
               <input type="checkbox" id="Haptic2" name="t"  onclick= "window.haptic2 = !window.haptic2; mcphrth();">
               <label for="Haptic2">Haptic Implosion(Android only)</label>
               <br>
              <input type="checkbox" id="Game On" name="t"  onclick= "
                  key  = 'e';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               <label for="Game On">Game On![e]</label><br>
              <input type="checkbox" id="Star Arms" name="t"  onclick= "
                  key  = '~';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               <label for="Star Arms">Continuous Arms![~]</label><br>

               <input type="checkbox" id="Fullscreen" name="t"  onclick= "
                   key  = 'h';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                <label for="Fullscreen">Fullscreen![h]</label><br>
                <input type="checkbox" id="Verbose" name="t"  onclick= "
                    key  = 'v';
                    callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                 <label for="Verbose">Verbose![v]</label><br>
               <input type="checkbox" id="Volume Speed" name="t"  onclick= "
                   key  = 'w';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                <label for="Volume Speed">Volume Speed![w]</label><br>


                  <a id="disableVolume" name="t"  onclick= "

                      key  = 's';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                      Toggle Touch Sound![.s]</a>
                  <input type="checkbox" id="Touch" name="t"  onclick= "
                      key  = 't';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               <label for="Touch">Touch![t]</label><br>
               <a id="stillStar" name="t"  onclick= "

                   key  = 't';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true,'keyCode':key.charCodeAt(0)}));">
                   Touch Star![,t]</a><br>
               <input type="checkbox" id="Note Stars" name="t"  onclick= "
                   key  = 'P';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                <label for="Note Stars">Note Stars![P]</label>
                <br>
                <input type="checkbox" id="StarClover" name="t"  onclick= "
                    key  = 'O';
                    callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                 <label for="StarClover">Star in Clover![O]</label><br>
                 

                 <input type="checkbox" id="TrailOverflowsClover" name="t"  onclick= "
                     key  = 'Z';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     <label for="TrailOverflowsClover">Trail Overflows Clover![Z]</label><br>
                     
                     <input type="checkbox" id="flameOrRiver" name="t"  onclick= "
                         key  = 'r';
                         callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                         <label for="flameOrRiver">Flame or River?[,r]</label><br>
                         
                         <input type="checkbox" id="PixelStar" name="t"  onclick= "
                             key  = 'p';
                             callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                             <label for="PixelStar">PixelStar?![.p]</label><br>
                             
                     <a id="starOnDot" name="t"  onclick= "

                     key  = 'd';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true,'keyCode':key.charCodeAt(0)}));">
                  Star on Dot![,d]</a><br>

                     <a id="spirograph" name="t"  onclick= "
                     
                     key  = 'p';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true,'keyCode':key.charCodeAt(0)}));">
                         Spirograph?![,p]</a><br>
               <a id="pzyghthe" name="t"  onclick= "

                   key  = '9';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                   Harmonic Scythe![.9]</a><br>
               <a id="balloons" name="t"  onclick= "

                   key  = 'b';
                   callKey(new KeyboardEvent('keydown', {'key': key,'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                   Harmonic Spiraloons![,b]</a><br>
               <a id="balloonsExponential" name="t"  onclick= "

                   key  = 'n';
                   callKey(new KeyboardEvent('keydown', {'key': key,'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                   Harmonic Spiraloons Exponential![,n]</a><br>
               <a id="Star Stream" name="t"  onclick= "

                   key  = 'V';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Star Stream![V]</a><br>
               <a id="BulletMine" name="t"  onclick= "

                   key  = 'B';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Stream Bullets\Mines![B]</a><br>
               </div>
          </button>
          </div>
               <div class="dropdown">
                 <button class="dropbtn">StrShp2
                 
                 <div id="m2" class="dropdown-content">
               <a id="Clockwise Spin" name="t"  onclick= "

                   key  = 'D';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Clockwise Spin![D]</a><br>
               
               <a id="Counter Clockwise Spin" name="t"  onclick= "

                   key  = 'A';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Counter Clockwise Spin![A]</a><br>
               
               <a id="Shift Up" name="t"  onclick= "

                   key  = 'W';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Shift Up![W]</a><br>
               <a id="Shift Down" name="t"  onclick= "

                   key  = 'S';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Shift Down![S]</a><br>
               
               <a id="Star Spin" name="t"  onclick= "

                   key  = 'Q';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Star Spin![Q]</a><br>
               
               <a id="manualStar" name="t"  onclick= "

                   key  = 'g';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                   Manual Star![.g]</a><br>
               
               <input type="checkbox"  id="oreo" name="t"  onclick= "
                   key  = 'j';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true,'keyCode':key.charCodeAt(0)}));">
                   <label for="oreo"> Oreo?![,j]</label><br>
                   
               <a id="Cancel Background Noise" name="t"  onclick= "

                   key  = 'p';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Cancel Background Noise![p]</a><br>
               
               
               <a id="Listen Out" name="t"  onclick= "
                   key  = 'o';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               listen Out![o]</a><br>
               <a id="Listen In" name="t"  onclick= "
                   key  = 'i';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               listen In![i]</a><br>


               <input type="radio" id="High Tolerance" name="tolerance" onclick="window.highORlow = 2">
               <label for="High Tolerance">High Tolerance[,)]</label><br>
           <input type="radio" id="Low Tolerance" name="tolerance" onclick="window.highORlow =1;">
           <label for="Low Tolerance">Low Tolerance[,(]</label><br>
           
           
               <a id="Faster" name="t"  onclick= "
                   key  = '=';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               Faster Movement![=]</a><br>
               <a id="Slower" name="t"  onclick= "
                   key  = '_';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               Slower Movement![-]</a><br>
               <a id="Reset Movement Speed" name="t"  onclick= "
                   key  = '0';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               Reset Movement![0]</a><br>
               
               <label for="movementSpeed">Movement Speed[0]</label>
               <input type="number" id="movementSpeed" name="movementSpeed" class="num" onkeydown="
                       number = document.getElementById('movementSpeed').value;
                       key  = '0';
                       if(!isNaN(number)){
                           callKey(new KeyboardEvent('keydown', {'key':key, 'keyCode':key.charCodeAt(0)}));
                       }
                                               ">
                   <br>
                   
                   <label for="zoomSpeed">Zoom Speed[\]</label>
                   <input type="number" id="zoomSpeed" name="zoomSpeed" class="num" onkeydown="
                           number = document.getElementById('zoomSpeed').value;
                           key  = '\\';
                           if(!isNaN(number)){
                               callKey(new KeyboardEvent('keydown', {'key':key, 'keyCode':key.charCodeAt(0)}));
                           }
                                                   ">
                       <br>
                       <a id="FasterZoom" name="t"  onclick= "
                           key  = ']';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Faster Zoom![]]</a><br>
                       <a id="SlowerZoom" name="t"  onclick= "
                           key  = '[';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Slower Zoom![[]</a><br>
                       <a id="Reset Zoom Speed" name="t"  onclick= "
                           key  = '\\';
                           callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       Reset Zoom![\]</a><br>
                       <label for="Trail Length">Trail Seconds[/]</label>
                       <input type="number" id="Trail Length" name="Trail Length" class="num" onkeydown="
                               number = document.getElementById('Trail Length').value;
                               key  = '/';
                               if(!isNaN(number)){
                                   callKey(new KeyboardEvent('keydown', {'key':key, 'keyCode':key.charCodeAt(0)}));
                               }
                                                       ">
                           <br>
               <input type="radio" id="1 Rivers" name="eden" onclick="uniforms.eden.value = 0">
               <label for="1 Rivers">1 Rivers[{]</label><br>
               
               <input type="radio" id="5 Rivers in Clover" name="eden" onclick="uniforms.eden .value= 1">
               <label for="5 Rivers in Clover">5 Rivers in Clover[{]</label><br>
               
               <input type="radio" id="5 Rivers" name="eden" onclick="uniforms.eden.value = 2">
               <label for="5 Rivers">5 Rivers Up Top[{]</label><br>
               <a id="Stegosaurus" name="t"  onclick= "
                   key  = '}';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Stegasaurus![}]</a><br>
               
               <a id="MannyOnTrail" name="t"  onclick= "
                   key  = 'E';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   Manny On Trail![E]</a><br>

          </div>
               </button>
          </div>
        <div class="dropdown">
          <button class="dropbtn">Clvr
          <div  id="m3" class="dropdown-content">

              <input type="checkbox"  id="Variant1" name="t"  onclick= "
                  key  = '1';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                  <label for="Variant1"> Variant1![.1]</label><br>
              <input type="checkbox"  id="Variant2" name="t"  onclick= "
                  key  = '2';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                  <label for="Variant2">Variant2![.2]</label><br>

                  <input type="checkbox"  id="Variant3" name="t"  onclick= "
                          key  = '3';
                          callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                          <label for="Variant3">  Variant3![.3]</label><br>
                      
                      <input type="checkbox"  id="Variant4" name="t"  onclick= "
                              key  = '4';
                              callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                              <label for="Variant4">  Variant4![.4]</label><br>
                              
                              <input type="checkbox"  id="Variant5" name="t"  onclick= "
                                      key  = '5';
                                      callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                                      <label for="Variant5">  Variant5![.5]</label><br>
                                      
                                      <input type="checkbox"  id="Variant6" name="t"  onclick= "
                                              key  = '6';
                                              callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                                              <label for="Variant6">  Variant6![.6]</label><br>
                                              
                                              <input type="checkbox"  id="Variant7" name="t"  onclick= "
                                                      key  = '7';
                                                      callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                                                      <label for="Variant7">  Variant7![.7]</label><br>
                                                  
                                                  <input type="checkbox"  id="Variant8" name="t"  onclick= "
                                                          key  = '8';
                                                          callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                                                          <label for="Variant8">  Variant8![.8]</label><br>
                                                      
                                          
                                  
                          
              <a id="Chirality" name="t"  onclick= "
                  key  = '|';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  Flop Chirality![|]</a><br>
                 <a id="Add a petal" name="t"  onclick= "
                     key  = 'u';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                 Add a petal![u]</a><br>
                 <a id="Remove a petal" name="t"  onclick= "
                     key  = 'y';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                 Remove a petal![y]</a><br>
                 <!--https://www.w3schools.com/tags/att_input_type_number.asp this is the link for the below number code profile-->
                 <label for="petalCount">Petal Quantity:</label>
                <input type="number" id="petalCount" name="petalCount" class="num" onkeydown="uniforms.petals.value=document.getElementById('petalCount').value-6.">
                    </p>
                    
                    <input type="checkbox" id="omniCore" name="t"  onclick= "
                 key  = 'o';
                 callKey(new KeyboardEvent('keydown', {'key': key,'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
              <label for="omniCore">omniCORE![,o]</label><br>
              
                    <label for="coringConstant">Coring Value (.5-2.):</label>
                   <input type="number" id="coringConstant" name="coringConstant" class="num" onkeydown=
                       "coringValue=document.getElementById('coringConstant').value;
coreData.fill(coringValue);">
                       </p>

                       <input type="checkbox" id="dynamicCoring" name="t"  onclick= "
                    key  = 'c';
                    callKey(new KeyboardEvent('keydown', {'key': key,'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                 <label for="dynamicCoring">Dynamic Coring[,c]</label><br>
                 
                       <input type="checkbox" id="Center" name="t"  onclick= "
                    key  = 'c';
                    callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
             <label for="Center">Center![c]</label><br>
                 <input type="checkbox" id="Zoom Static" name="t"  onclick= "
                     key  = 'l';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="Zoom Static">Zoom Static![l]</label><br>
                  <input type="checkbox" id="Clovers Pop" name="t"  onclick= "
                      key  = 'n';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   <label for="Clovers Pop">Clovers Pop?![n]</label><br>
                   
                   <input type="checkbox" id="Clovers Slide" name="t"  onclick= "
                       key  = 'H';
                       callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                    <label for="Clovers Slide">Clovers Slide![H]</label><br>
                    
                    <input type="checkbox" id="Dancer" name="t"  onclick= "
                       key  = 's';
                       callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       
                    <label for="Dancer">Dancer![s]</label><br>
                    
                    <input type="checkbox" id="multiplicatorNexus" name="t"  onclick= "uniforms.multiplicatorNexus.value=!uniforms.multiplicatorNexus.value">
                        <label for="multiplicatorNexus">Slippery Spokes![,m]</label><br>

                         <input type="checkbox" id="Reverse Colors" name="t"  onclick= "
                             key  = ';';
                             callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                          <label for="Reverse Colors">Reverse Colors![;]</label><br>

                          <input type="checkbox" id="Remediate Colors" name="t"  onclick= "
                              key  = 'R';
                              callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                           <label for="Remediate Colors">Remediate Colors![R]</label><br>

                           <input type="checkbox" id="Inherited Colors" name="t"  onclick= "
                               key  = 'K';
                               callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                            <label for="Inherited Colors">Inherited Colors?![K]</label><br>


                            <input type="checkbox" id="Radial Rainbow Clover" name="t"  onclick= "
                                key  = 'M';
                                callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                             <label for="Radial Rainbow Clover">Radial Rainbow Clover![M]</label><br>


                           <input type="checkbox" id="Refractelate" name="t"  onclick= "
                               key  = '!';
                               callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                            <label for="Refractelate">Refractelate![!]</label><br>


                            <input type="checkbox" id="Clovoid" name="t"  onclick= "
                                key  = '@';
                                callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                             <label for="Clovoid">Clovoid![@]</label><br>
                             
                             <input type="checkbox" id="144000" name="t"  onclick= "
                                 key  = 'J';
                                 callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                              <label for="144000">144000![J]</label><br>
                              <input type="checkbox" id="Spoker" name="t"  onclick= "
                                  key  = 'T';
                                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                               <label for="Spoker">Spoker?![T]</label><br>
                               <input type="checkbox" id="SpokeLove" name="t"  onclick= "
                                   key  = 'F';
                                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                                <label for="SpokeLove">Spoke Love![F]</label><br>
                                
                                <input type="checkbox" id="Continuum Clover" name="t"  onclick= "
                                    key  = '&';
                                    callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                                 <label for="Continuum Clover">Continuum Clover![&]</label><br>
                                 
                                 <input type="checkbox" id="field Power Boost" name="t"  onclick= "
                                     key  = 'x';
                                     callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                                  <label for="field Power Boost">Field Power Boost![,x]</label><br>
                                  
                                  <input type="checkbox" id="meta field Power Boost" name="t"  onclick= "
                                      key  = 'z';
                                      callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                                   <label for="meta field Power Boost">Meta Field Power Boost![,z]</label><br>
                                   
                                 <a id="ReFactor" name="t"  onclick= "
                                     key  = 'r';
                                     callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true, 'keyCode':key.charCodeAt(0)}));">
                                 ReFactor Clover![.r]</a><br>
                                 </div>
          </button>

          </div>
                               <div class="dropdown">
                                 <button class="dropbtn">Clvr2
                                 <div  id="m4" class="dropdown-content">
                                     <label for="Base Number">Log base this of x^3 (maybe 1.5-4):</label>
                                    <input type="number" id="Base Number" name="Base Number" class="num" onkeydown="uniforms.baseN.value=document.getElementById('Base Number').value">
                                        </br>
                                        
                                             <input type="checkbox" id="duperCore" name="t"  onclick= "
                                                 key  = 'd';
                                                 callKey(new KeyboardEvent('keydown', {'key': key,'altKey':true, 'keyCode':key.charCodeAt(0)}));">
                                              <label for="duperCore">Duper Core![.d]</label><br>
                       
                <form>

                      <input type="radio" id="OriginalOrange" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-7;">
                      <label for="OriginalOrange">Original Orange!</label><br>
                  <input type="radio" id="GreenAndPink" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-2;">
                  <label for="GreenAndPink">Green and Pink!</label><br>
                  <input type="radio" id="OddOrange" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-3;">
                  <label for="OddOrange">Odd Orange!</label><br>
                  <input type="radio" id="YellowAndPurple" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-4;">
                  <label for="YellowAndPurple">Yellow and Purple!</label><br>

                  <input type="radio" id="BlueAndPink" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-5;">
                  <label for="BlueAndPink">Blue and Pink!</label><br>

                  <input type="radio" id="Glowing" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-6;">
                  <label for="Glowing">Glowing!</label><br>

                    <input type="radio" id="Rainbow" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-1;">
                    <label for="Rainbow">Rainbow!</label><br>

                      <input type="radio" id="Inheritance" name="colorMode" onclick="uniforms[ 'colorCombo' ].value=-8;">
                      <label for="Inheritance">Inheritance!</label><br>
                </form>
                [q]

                <br>


                <form>
                  <input type="radio" id="Up" name="carousel" onclick="uniforms[ 'carousel' ].value=-1;">
                  <label for="Up">Carousel Up!</label><br>
                  <input type="radio" id="Down" name="carousel" onclick="uniforms[ 'carousel' ].value=1;">
                  <label for="Down">Carousel Down!</label><br>
                  <input type="radio" id="Off" name="carousel" onclick="uniforms[ 'carousel' ].value=0;">
                  <label for="Off">Carousel Off</label>

                </form>
                [j]
                <br>

                <form>
                  <input type="radio" id="mUp" name="mcarousel" onclick="uniforms[ 'metaCarousel' ].value=-1;">
                  <label for="mUp">Meta-Carousel Wise One!</label><br>
                  <input type="radio" id="mDown" name="mcarousel" onclick="uniforms[ 'metaCarousel' ].value=1;">
                  <label for="mDown">Meta-Carousel Wise 2!</label><br>
                  <input type="radio" id="mOff" name="mcarousel" onclick="uniforms[ 'metaCarousel' ].value=0;">
                  <label for="mOff">Meta-Carousel Off</label>
                </form>
                [k]
                <br>

            <form>
              <input type="radio" id="SpirallizeOriginal" name="Spirallize" onclick="uniforms[ 'spirated' ].value=1;">
              <label for="SpirallizeOriginal">Spirallize Original!</label><br>
              <input type="radio" id="SpirallizeMirror" name="Spirallize" onclick="uniforms[ 'spirated' ].value=-1;">
              <label for="SpirallizeMirror">Spirallize Mirror!</label><br>
              <input type="radio" id="SpirallizeOff" name="Spirallize" onclick="uniforms[ 'spirated' ].value=0;">
              <label for="SpirallizeOff">Spirallize Off</label>

            </form>
[?]
<br>

<a id="leapIn" name="t"  onclick= "
key  = 'C';
callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
Leap In![C]</a><br>

<a id="resetZoom" name="t"  onclick= "
key  = 'L';
callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
Reset Zoom![L]</a><br>

                      </div>
                                 </button>

        </div>
        
        <div class="dropdown">
          <button class="dropbtn">Extras
          <div  id="m5" class="dropdown-content">
               <input type="checkbox" id="Friends" name="t"  onclick= "
                   key  = 'f';
                   callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                <label for="Friends">Friends![f]</label><br>
                <input type="checkbox" id="Bridge" name="t"  onclick= "
                    key  = 'z';
                    callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                 <label for="Bridge">Bridge![z]</label><br>
                 <input type="checkbox" id="Wheel" name="t"  onclick= "
                     key  = 'm';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="Wheel">Wheel![m]</label><br>
                  <label for="mandelCloverSize">Wheel Degree:[m]</label>
                  <input type="number" id="mandelCloverSize" name="mandelCloverSize" class="num" onkeydown="
                                 uniforms.mandelCloverFactor.value=document.getElementById('mandelCloverSize').value
                                 "><br>
                      
                  <input type="checkbox" id="Articles" name="t"  onclick= "
                      key  = 'G';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                   <label for="Articles">Articles![G]</label><br>
                    
                    <input type="checkbox" id="Dynamic Dance" name="t"  onclick= "
                        key  = 'X';
                        callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     <label for="Dynamic Dance">Dynamic Dance![X]</label><br>
                     
                     <input type="checkbox" id="Feedback Voice" name="t"  onclick= "window.FeedbackSound =  !window.FeedbackSound;">
                      <label for="Feedback Voice">Feedback Voice!(regulated by System Volume)[,v]</label><br>
                     
                     <input type="checkbox" id="Blank Background" name="t"  onclick= "
                         key  = 'Y';
                         callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                      <label for="Blank Background">Blank Background![Y]</label><br>
                      
                 <a id="Cycle Character" name="t"  onclick= "
                     key  = 'U';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     Cycle character![U]</a><br>
                 
            <a id="Music Angel Man" name="t"  onclick= "
                key  = 'a';
                callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true,'keyCode':key.charCodeAt(0)}));">
                Music Angel Man![.a]</a><br>
                 <a id="Metronome Up" name="t"  onclick= "
                     key  = '>';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     Metronome Up![>]</a><br>

                 <a id="Metronome Down" name="t"  onclick= "
                     key  = '<';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     Metronome Down![<]</a><br>

                 
                 <a id="Just Face" name="t"  onclick= "
                     key  = '*';
                     callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                     Just Face![*]</a><br>
                 
                  <a id="Manny" name="t"  onclick= "
                      key  = 'g';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                      Manny![g]</a><br>


                  <a id="Acrostic" name="t"  onclick= "
                      key  = '$';
                      callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                      Acrostic![$]</a><br>

                   <a id="ToLToK" name="t"  onclick= "
                       key  = 'd';
                       callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                       ToLToK![d]</a><br>

                    <a id="Mandelbrot" name="t"  onclick= "
                        key  = 'a';
                        callKey(new KeyboardEvent('keydown', {'key': key, 'ctrlKey':true, 'keyCode':key.charCodeAt(0)}));">
                        Mandelbrot![,a]</a><br>

                     <a id="Refractelbrot" name="t"  onclick= "
                         key  = 'r';
                         callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                         Refractelbrot![r]</a><br>

           <a id="XSquared" name="t"  onclick= "
               key  = 'x';
               callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
               XSquared![x]</a><br>

         <a id="ToLX" name="t"  onclick= "
             key  = 'b';
             callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
             ToLX![b]</a><br>
         
               
               
        </div>
          </button>

    </div>
        
        <div class="dropdown">
          <button class="dropbtn">Resolution
          <div id="resolutionDropContent" class="dropdown-content" style="column-count: 1">
              <label for="rez">Pixels per pixel</label>
             <input type="number" id="rez" name="rez" class="num" onkeydown="
                            rez=window.devicePixelRatio/document.getElementById('rez').value
                            renderer.setPixelRatio( rez);
                            ">
                 <br>
                 
                  <input type="radio" id=".5rez" name="colorMode" onclick="
                  key  = '`';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for=".5rez">.5 of a pixel per pixel (Apple Only)[`]</label><br>
                  <input type="radio" id="1rez" name="colorMode" onclick="
                  key  = '1';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="1rez">1 pixel per pixel[1]</label><br>
                  <input type="radio" id="2rez" name="colorMode" onclick="
                  key  = '2';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="2rez">2 pixels per pixel[2]</label><br>
                  <input type="radio" id="3rez" name="colorMode" onclick="
                  key  = '3';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="3rez">3 pixels per pixel[3]</label><br>
                  <input type="radio" id="4rez" name="colorMode" onclick="
                  key  = '4';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="4rez">4 pixels per pixel[4]</label><br>
                  <input type="radio" id="5rez" name="colorMode" onclick="
                  key  = '5';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="5rez">5 pixels per pixel[5]</label><br>
                  <input type="radio" id="6rez" name="colorMode" onclick="
                  key  = '6';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="6rez">6 pixels per pixel[6]</label><br>
                  <input type="radio" id="7rez" name="colorMode" onclick="
                  key  = '7';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                  <label for="7rez">7 pixels per pixel[7]</label><br>
                  
              <input type="radio" id="8rez" name="colorMode" onclick="
              key  = '8';
              callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
              <label for="8rez">8 pixels per pixel[8]</label><br>
    
                  <a id="Incrementally Increase Resolution" name="t"  onclick="
                  key  = '_';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                      Refine resolution![_]</a><br>
                  <a id="Incrementally Decrease Resolution" name="t"  onclick="
                  key  = '+';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'keyCode':key.charCodeAt(0)}));">
                      Reduce resolution![+]</a><br>
                  
              </div>
          </button>

                  </div>
        <script>
            function clearOSMD(){
            }
            </script>
        <div class="dropdown">
          <button class="dropbtn">Word
          <div id="scoreDropContent" class="dropdown-content" style="font-size:1em; column-count:1;">
             
          <select name="song" id="song"
              onchange='
                if(this.value!="none"){
                    loadScore(this.value)

                    if (uniforms.scoreLoaded.value) osmd.clear();
                    uniforms.scoreLoaded.value=true;
                }
                else{
                        osmd.zoom=0.;
                        osmd.render();
                        osmd.clear();
                        osmd=null; adjustThreeJSWindow();
                            uniforms.scoreLoaded.value=false;

            }'
        >
              <option value='none'>
                  None
              </option>
            <option value="https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr/JesusChristisRisenToday.xml">
                Jesus Christ is Risen Today
            </option>
            <option value="https://cdn.jsdelivr.net/gh/Z1X1Z/zonex_jsdelivr/Amazing_Grace.mxl">
                Amazing Grace
            </option>
          </select>
          <label for="song"> :song</label>
<br>
          <script> document.getElementById('song').value = "none";</script>
             
             <input type="checkbox" id="ScoreTranslucent" name="t"  onclick= '
        if("osmd" in window&&osmd!=null)
   {
              sheetTranslucent=!sheetTranslucent;

        if (sheetTranslucent) {
                   document.getElementById("textWindow").style="position:fixed; margin-left:50%;";
                                  document.getElementById("osmdCanvas").style.bottom="40px"
        }
        else {   document.getElementById("textWindow").style="position:static;margin-left:0%;";
                                     document.getElementById("osmdCanvas").style.bottom="0px"
                                bottomOfScreenHeight=0;
            }
                if("osmd" in window && typeof osmd != null){
                        setOSMDcolors();

                        osmdResize();
                        adjustThreeJSWindow();
                    }
   }
   
   '>
              <label for="ScoreTranslucent">Score Translucent</label>
              <input type="checkbox" id="scoreBlack" name="t"  onclick= '
             scoreColorInversion=true;
                if("osmd" in window && typeof osmd != null){
                        setOSMDcolors();
                        osmd.render();
                        getElementById("scoreWhite").checked  = false;
                }
'>              <label for="scoreBlack">Score Black</label>
<input type="checkbox" id="scoreWhite" name="t"  onclick= '
scoreColorInversion=false;
                if("osmd" in window && typeof osmd != null){
                    setOSMDcolors();
                    osmd.render();
                    getElementById("scoreBlack").checked  = false
                }
'>              <label for="scoreWhite">Score White</label>

              <br>
              <input type="file" id="files" >
                  <output id="list"></output>
                  <p>
                  
                  
                  
                  <select name="choose reader"  id="reader"
                      onchange="
                  readerSet = true;

                                    key  = 'b';
                                    number = this.value;
                                    window.muteToggle = true;
                                    callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true, 'keyCode':key.charCodeAt(0)}));
                                    window.muteToggle = false;
"
                >
                <option value="100" selected="selected">Choose Your Blessed Reader (not available on mobile)[#.c(BookChapter)]:
                </option>
                      <option value='0'>
                          Hays (with text)[#.b0]
                      </option>
                      <option value='1'>
                          Gilbert by book[#.b1]
                      </option>
                      
                            <option value='2'>
                                Souer by book[#.b2]
                            </option>
                            <option value='3'>
                                Hays by book[#.b3]
                            </option>
                    <option value='4'>
                        Gilbert by chapter[#.b4]
                    </option>
                    
                          <option value='5'>
                              Souer by chapter[#.b5]
                          </option>
                          <option value='6'>
                              Hays by chapter[#.b6]
                          </option>
                          <option value='7'>
                              Gilbert with music by book[#.b7]
                          </option>
                          <option value='8'>
                              Gilbert with music by chapter[#.b8]
                          </option>
                          
                  </select>
                  
                  
                  <input type="checkbox" id="BibleToggle" name="t"  onclick= "
                  key  = 'b';
                  callKey(new KeyboardEvent('keydown', {'key': key, 'altKey':true, 'keyCode':key.charCodeAt(0)}));
">
                  <label for="BibleToggle">Listen to The Bible[.b]</label>
                  
                  <br>
              </div>
          </button>

                  </div>
        
        
     

        </div>
        <script src="fileSelectAndLoadOSMD.js"></script>
        
<div>
    <p>
        <div id="hotkeyHolder">
              
              </div>
</div>
              
    </div>

    </div>
    <script>let n = document.getElementsByName('t');
        for(var p = 0; p<n.length;p++)n[p].checked  = false; </script>
    
    
    <script>
     if(location.hash.includes(".c")){
        let content = document.getElementsByClassName("dropdown-content");

        document.getElementById("nav").style.width="50%";
        for(var b = 0; b<content.length; b++)content[b].style.width="50%";
        }
     
     </script>
    

    
    <div id="container"> </div>
    <script>//used for resetting column counts for screen porportion in onWindowResize in starshipMod
        var menuBoxes = document.getElementsByClassName("dropdown-content")
        var rezBox = document.getElementById("resolutionDropContent");
        var scoreBox = document.getElementById("scoreDropContent");

          let aeid="";
          let blocked = false;
          let onMenuHeader = false;
          function pointerInMenu(e){
             onMenuHeader = false;
            if(e.srcElement.className=="dropbtn")
            {onMenuHeader = true;

                }
          }
        function closeMenus()
        {
            let allMenus = document.getElementsByClassName("dropdown-content");
        for(var menus=0; menus<allMenus.length;menus++)
       
       allMenus[menus].style.display="none";
        let allButtons = document.getElementsByClassName("dropbtn");
    for(var buttons=0; buttons<allButtons.length;buttons++)
    allButtons[buttons].style.backgroundColor="rgba(127.5,127.5,127.5,.5)";
        
            }
          function toggleMenuCategory ()
          {
          if(ae!=null&&!menuJustClosedByBackgroundPress&&ae.id!="load message"){
              
              closeMenus();
               
                if(ae.id!=aeid)
                {
                blocked=false;
                }
            if(blocked&&onMenuHeader)
              {ae.style.display="none";blocked=false;
                  document.activeElement.style.backgroundColor="rgba(127.5,127.5,127.5,.5)";

              }
              else if(!blocked&&onMenuHeader)
              {ae.style.display="block";blocked=true;
                  ae.parentElement.style.backgroundColor="green";

              }
              else if(ae.style.display=="none"||ae.style.display=="")
              {blocked=true;

              ae.style.display="block";
              ae.parentElement.style.backgroundColor="green";

              }
              else {
                  blocked=false;
                  ae.style.display="none";
                  ae.parentElement.style.backgroundColor="rgba(127.5,127.5,127.5,.5)";

                  }          aeid=ae.id;

                              }

          menuJustClosedByBackgroundPress=false

          }
        let menuJustClosedByBackgroundPress = false;

        document.getElementById("container").addEventListener("pointerdown",(e)=>{aeid="";menuJustClosedByBackgroundPress=true;closeMenus();})

         addEventListener("pointerover",(e)=>{pointerInMenu(e)})

         //addEventListener("pointerup",(e)=>{)//setTimeout to give android time to notice active element
         addEventListener("click",(e)=>{
ae=(e.target.className=="dropbtn")?e.target.firstElementChild:null;
          setTimeout(toggleMenuCategory,50)})//setTimeout to give time for menuJustClosedByBackgroundPress

    </script>
    <script src="wadLoader.js"> </script>
    
    <div class="onBottom" style="text-align:right; width:100%;">
        
            <button onclick='
                let menu=document.getElementById("menu")
                if( menu.style.display=="block")  menu.style.display="none"
                else if( menu.style.display=="none")menu.style.display="block";'>Menu</button>
    </div>
    <div id="textWindow" class="onBottom" style="bottom:46px;"></div>

    <div id="score">
        <canvas id="CANVAS"></canvas>

            <div id="osmdCanvas" class="onBottom" style = "bottom:40px;">
                <div id="anchorDiv" >
                    <img id="CursorIMG"></img>
                    <canvas id="osmdCanvasAnchor"  >
                        </canvas>
                </div>
            </div>

    </div>

    </div id="score">
        <script>
        document.getElementById("files").addEventListener("change", handleFileSelect, false);
/*
        document.getElementById("score").onpointerdown=
        function(event){
          event.stopImmediatePropagation();
          event.preventDefault();
        };
 */
        </script>
    
    
    
    
    
    
    
    
    <script id="vertexShader" type="x-shader/x-vertex" >

        varying vec2 vUv;

    void main()    {

        vUv = uv;
        gl_Position = vec4( position, 1.0 );
    }
</script>


    <script id="wipeFragmentShader" type="x-shader/x-fragment">
        varying vec2 vUv;
        uniform sampler2D cloverSampler;
        uniform vec2 resolution;
       void main(){
          //  gl_FragColor=texture2D(cloverSampler, vUv);
            gl_FragColor=texture(cloverSampler, vUv);

        }
        </script>

    <script id="FourRiversfragmentShader" type="x-shader/x-fragment">
        varying vec2 vUv;
        uniform sampler2D STAR;
        uniform sampler2D EDEN;
        uniform vec2 loudestFret1;
        uniform vec2 loudestFret2;
        uniform vec2 loudestFret3;
        uniform vec2 loudestFret4;
        uniform vec2 d;
        uniform vec2 resolution;
        
        uniform float volumeFret1;
        uniform float volumeFret2;
        uniform float volumeFret3;
        uniform float volumeFret4;
        
        uniform int eden;

        const float PI = 3.1415927410125732;
        const float gr = 1.61803398874989484820458683436563811772030917980576286213544862270526046281890244970720720418939113748475408807538689175212663386222353693179318006076672635443338908659593958290563832266131992829026788067520876689250171169620703222104321626954862629631361443814975870122034080588795445474924618569536486444924104432077134494704956584678850987433944221254487706647;
        const float leaf = -1.3247179572447460259609088544780973407344040569017333645340150503028278512455475940546993479817872803299109209947422074251089026390458977955943147570967234717541668390388674187517369315842535499082466223545337273504589879909568150627745509802486213012169894157524574548625075626524610368938904839932269952074975962828868556908150704513696109853352577281586033441141927828273765296032993584674231028483241695239006108543338219;
        float zin(float x){return -sin(x);}
        float coz(float x){return -cos(x);}
        
        
        vec2 spin2(vec2 f, float t)
        {    //https://en.wikipedia.org/wiki/Rotation_matrix
            float angle =t;
            float fxb=f.x;
            f.x=-f.x*coz(-angle)-f.y*zin(-angle);
         f.y=fxb*zin(-angle)-f.y*coz(-angle);
         return f;
        }
        
void main(){
        vec4 Pishon=vec4(0.),Gihon=vec4(0.),Tigris=vec4(0.),Euphrates=vec4(0.);
        vec2 vUvEagle=vec2(0.),vUvMan=vec2(0.),vUvOx=vec2(0.),vUvLion=vec2(0.);
        
            float cutOutDegree=1.;
            float atanD = atan(d.y,d.x);
            float stegOrFour = 1.;
            if(eden!=4)
       {
           vec2 vUv2 = vUv*2.;

                vUvEagle=vUv2-1.;
                vUvMan=vUv2;
                vUvOx=vUv2+vec2(0.,-1.);
                vUvLion=vUv2+vec2(-1.,0.);
       }
       else
       {
           vec2 scale = min(resolution.x,resolution.y)/resolution.yx;
           vec2 vUvScaled =(vUv-.5)*scale;
             vUvEagle = (vUvScaled*volumeFret1-loudestFret1/8.)/scale*2.+.5;
             vUvMan = (vUvScaled*volumeFret2-loudestFret2/8.)/scale*2.+.5;
             vUvOx = (vUvScaled*volumeFret3-loudestFret3/8.)/scale*2.+.5;
             vUvLion = (vUvScaled*volumeFret4-loudestFret4/8.)/scale*2.+.5;
                        stegOrFour=2.;
    }
            if(abs(max(vUvEagle.x,vUvEagle.y))<1.&&min(vUvEagle.x,vUvEagle.y)>0.)
                        Pishon += texture2D(STAR,vUvEagle);
            if(abs(max(vUvOx.x,vUvOx.y))<1.&&min(vUvOx.x,vUvOx.y)>0.)Gihon+=texture2D(STAR,vUvOx);
            if(abs(max(vUvMan.x,vUvMan.y))<1.&&min(vUvMan.x,vUvMan.y)>0.) Tigris+=texture2D(STAR,vUvMan);
            if(abs(max(vUvLion.x,vUvLion.y))<1.&&min(vUvLion.x,vUvLion.y)>0.)Euphrates+=texture2D(STAR,vUvLion);
            vec4  TheFifthRiver = texture2D(STAR,vUv);

             gl_FragColor=clamp((Pishon+Gihon+Tigris+Euphrates)
                      // -TheFifthRiver//alpha blended
                       -TheFifthRiver*stegOrFour
                       ,0.,1.)
    /vec4(vec3(1.5),1.)+TheFifthRiver;//vec4(vec3(2.),1.); //the divisor of the rivers is seemingly open to interpretation
    ;}
        </script>
<script id="fragmentShader" type="x-shader/x-fragment">
    varying vec2 vUv;
    
    uniform bool pixelSTARon;
    uniform float fftSize;
    uniform float sampleRate;
    uniform float nyq;
    uniform sampler2D audioBuffer;
    uniform sampler2D micIn;
    
    
    uniform sampler2D STAR;
    uniform sampler2D EDEN;
    uniform sampler2D coreTextureSampler;
    uniform sampler2D omniDynamic;
    uniform sampler2D uberDuper;

    uniform int eden;

    uniform bool multiplicatorNexus;
    uniform bool squareClover;

    uniform int musicAngelMan;
    uniform bool fieldPowerBoost;
    uniform bool fieldPowerBoostMeta;
    uniform bool helm;
    uniform float balloonsON;
    uniform float balloonsONexponential;
    uniform bool sparklesON;
    uniform bool SPHEREofTheLORD;
    uniform float note;

    uniform float refactorCores;
    uniform bool clvrVariant1;
    uniform bool clvrVariant2;
    uniform bool clvrVariant3;
    uniform bool clvrVariant4;
    uniform bool clvrVariant5;
    uniform bool clvrVariant6;
    uniform bool clvrVariant7;
    uniform bool clvrVariant8;

    uniform bool dynamicDance;
    uniform bool Spoker;
    uniform bool spokelover;
    uniform bool continuumClover;
    uniform bool cloverSlide;
    uniform float baseN;
    
    uniform bool Inherited;
    uniform bool spokesVisualizeColors;
    uniform vec2 coords;
    uniform int starOnDot;
    uniform vec2 dotCoord;
    uniform vec2 d;
    uniform vec2 coordSHIFT;
    uniform float duperZoom;

    uniform vec2 resolution;

    uniform int colorCombo;
    uniform bool colorInverter;
    
    uniform bool gameOn;
    uniform bool scoreLoaded;

    uniform float time;
    uniform float volume;
    uniform float totalAmp;

    uniform float rate;
    uniform float zoom;
    uniform float metronome;

    uniform float time2dance;
    uniform int fourCreats;
    uniform int Character;
    uniform bool articles;


    uniform bool MetaCored;//used for freezing current zoom level
    uniform bool outerCoresOff;//used for isolating coring to central core

    uniform bool free;

    uniform float morph;

    uniform float carousel;
    uniform float metaCarousel;
    uniform float petals;

    uniform float spirated;

    uniform bool hearTOL;

    uniform bool wheel;
    uniform bool Refractelate;
    uniform float centralCores;
    uniform float externalCores;
    uniform float upCoreCycler;

uniform bool Clovoid;
uniform bool remediatedColors;
uniform bool dotted;
uniform bool onehundredfortyfourthousand;
uniform float shaderScale;

uniform float starSpin;
uniform int chirality;

uniform int MannyONtrail;
uniform float twistStar;
uniform float flipStar;
uniform bool NightAndDay;

uniform float mandelCloverFactor;
uniform float exponentialPetals;



                                  
                                  
                                  const float PI = 3.1415927410125732;
                                  const float PI2 = PI*2.;
    const float gr = 1.618033988749;
    const float leaf = -1.3247;//1795724474;

    float lerp(float a) {return -abs(mod(a,2.)-1.);}
    float lerp2(float a) {return -abs(mod(a,4.)-2.)+1.;}

    float zin(float x){return -sin(x);}
    float coz(float x){return -cos(x);}

    
    //The below hsv2rgb function is:
    // The MIT License
    // Copyright © 2014 Inigo Quilez
    vec3 hsv2rgb( vec3 c )//https://www.shadertoy.com/view/lsS3Wc
    {
        vec3 rgb = clamp( abs(mod(c.x*6.0+vec3(0.0,4.0,2.0),6.0)-3.0)-1.0, 0.0, 1.0 );
        return c.z * mix( vec3(1.0), rgb, c.y);
    }
    
    vec2 spin2(vec2 f, float t)
    {    //https://en.wikipedia.org/wiki/Rotation_matrix
        float angle =t;
        float fxb=f.x;
        f.x=-f.x*coz(-angle)-f.y*zin(-angle);
     f.y=fxb*zin(-angle)-f.y*coz(-angle);
     return f;
    }
    
    
    
    
   vec4 waveForm(){
       vec4 ret=vec4(0.);//1.,.5,1.,1.);
       if((1.-vUv.y)<.75){
           
          // vec2 flatScreen=1.-vUv;
          // flatScreen*=2.;
    float frAmp = texture2D(audioBuffer, vec2(pow(abs(.5-vUv.x)*2.,2.)/2.,0.)).r;
    
   if (log(abs(frAmp)/(1.-vUv.y)*(resolution.x/max(
                                                     resolution.x,resolution.y)))*2.>1.) ret = vec4(sign(frAmp));
   
   }
               //           else ret=vec4(1.);
       
    return ret;
    }
    
    vec4 audioEq( vec2 uv )//Shekina Glory
    {

        uv=uv.yx;
        float angle = ((-atan(uv.y,uv.x)*flipStar-twistStar
                        +PI/2.+PI/2.*flipStar)/PI2);
                        //angle=mod(angle,1.);
                        
        float frAmp=0.;
        //return vec4(angle);
        const float octBoost = 17.;
      //  float b =nyq*pow(2.,angle+octBoost);
//starts -3, full -2
        for (float n = -3.; n<3.;n+=1.0)//the range seems small
       // if(b>=.5/nyq&&b<sampleRate/2.)
//not sure why it has negative range
        //if (twistStar<24.)
         {
              float b =nyq*pow(2.,angle+n);

                frAmp += texture2D(micIn, vec2(b,0.)).r;
        }
         //  frAmp/=255.;
           frAmp/=2.;
        float d = length( uv);
        float frampDIVlend = frAmp/d;
        float frampMultlen = frAmp*d;
       //
       vec4 ret =vec4(0.);
         if ((frampDIVlend>.5|| frampMultlen>.125)
//outer shell
             &&(frampDIVlend<1.||(frampDIVlend>2.&&(frampDIVlend<4.||frampDIVlend>8.)))
            ||
              (frampMultlen>.5)
            )
     
        ret=  vec4(clamp(hsv2rgb(
                                      vec3(
                                           mod((-angle+1./12.)//+3.-flipStar/12.
                                               ,1.),1.,1.
                                           ))
                              ,.0,1.), 1.)/pow(2.71828,d*1.5);
        else ret= vec4(.0);
        return ret;
    }



    float starnSize = PI/120.*1.5*2.;
    vec4 starns ( vec2 uv,float noteOfStar)//Seven stars, two witnesses
    {
      //  float nyq =  fftSize/sampleRate/2.;
        
        //uv=vec2(-uv.x,uv.y);
        float scalar =1./1.5/2.;
        float octaveSpin = 5./12.;
    
        float angle1 = (-noteOfStar/12.)*PI2*flipStar+twistStar*flipStar+PI*flipStar;//this is for the position from centerVV;
        uv.x += coz(angle1)*scalar;
       uv.y += zin(angle1)*scalar;//^^
       uv=spin2(uv,-angle1+PI/2.
                );
       vec4 ret = vec4(0.);
       if(length(uv)<starnSize){
       //uv *=    26.5;
   // return vec4(angle1/PI2+.5  );
            float angle = atan(uv.x,uv.y);//
          //       if(angle<0.)angle = PI-angle;
          //  angle += (PI2*(noteOfStar
//this value is uncertain
               //           )/12. );
               
        angle /= PI2;
        angle = angle+.5;
       //  angle = mod(angle+1.,1.);
      //   return vec4(uv*10.,
        //             vec3(angle)
      //            length(uv)
      //               ,1.);
        float oct = floor(angle*10.+.5-3.);
        
        float note0 = oct+angle1/PI2*flipStar+3./12.+twistStar/PI2;
      //  return vec4(note0/72.);
       // return vec4(note0/144.);
       note0-=1.;
        float note1  =nyq*pow(2.,note0);
        float noteAmp = texture2D(micIn,
        vec2(note1
        ,0.)).r;
       // noteAmp=pow(noteAmp,.5);
       // noteAmp/=255.;
      // return vec4(noteAmp);
        float d = length( uv);///16.;
        
        //fr=(fr)*(fr)/3.;
      //  float power = 5.;
      // float b = pow(noteAmp,power)/pow(d*6.,power*.5);
        float rote = -0.;
        float noteAmpToLength=noteAmp/d;
       float noteAmpByLength = noteAmp*d;
       // if(noteOfStar==0.)return vec4(1.);
       // else return vec4(0.);
       //return vec4(noteAmpToLength);
    
            if ((noteAmpToLength>.5|| noteAmpByLength>.125)
   //outer shell
                &&(noteAmpToLength<1.||(noteAmpToLength>2.&&(noteAmpToLength<4.||noteAmpToLength>8.)))
               ||
                 (noteAmpByLength>.5)
               )
               
              {
                  
           if(
              noteOfStar==mod(0. +rote,12.)||
              noteOfStar==mod(6. +rote,12.))
              ret=vec4(.5);
              else if(
              noteOfStar==mod(2. +rote,12.) ||
              noteOfStar==mod(5.  +rote,12.)||
              noteOfStar== mod(7. +rote,12.)||
              noteOfStar== mod(10. +rote,12.))
              {
                  ret=vec4(-clamp(
                                  noteAmpToLength
                           ,0.,1.)*.441
                           );
            }
        else{
            
ret= vec4(clamp(
                noteAmpToLength
            ,0. ,1.)*.441
       );
           }
           }
}
        return ret;
    }


    
    vec3 heart(vec2 g, vec2 t){
        g/=gr+1.;
        //g.x-=.5;
        g.y*=-1.;
        t.y*=-1.;

        vec2 z=g.xy;
        
    vec3 h=vec3(0.);
    const float iterations = 40.;
        for (float f=0.;f<iterations;f++)if(abs(z.y+z.x)>2.){h=vec3(0.);break;}
        else {z=vec2(((z.x*z.x-z.y*z.y)-g.x+t.x/2.),(2.0*z.x*z.y-g.y+t.y/2.));//mandelbrot loop factored into real and imaginary components from z<=z^2-g
        
        h+=vec3(
                17.*(z.x*z.y-clamp(z.x,0.,10000.)),
                2.*(z.x+abs(z.y)),
                z.y)
        /length(z)/iterations*2./3.;//*(1.-length(g));
        }
    return h;
    }
    vec3 heartsRibs(vec2 g, vec2 t){
        g/=gr+1.;
        //g.x-=.5;
        g.y*=-1.;
        t.y*=-1.;
        vec2 z=g.xy;
    vec3 h=vec3(0.);
    const float iterations = 40.;
        for (float f=0.;f<iterations;f++)if(abs(z.y+z.x)>2.){h=vec3(0.);break;}
        else {z=vec2(((z.x*z.x-z.y*z.y)-g.x+t.x),(2.0*z.x*z.y-g.y+t.y));//mandelbrot loop factored into real and imaginary components from z<=z^2-g
          h+=(vec3(z.x*z.y,(1.-z.y)/z.x,(1.-z.x)/z.y)
                                    )/length(z)/iterations;}
    return h;
    }
    
      vec3 face(vec2 g, vec2 t){
      float l = 1.;
      vec2 z=g.xy;
      //if(g.x*g.x+g.y*g.y<40.)
      for (int f=0;f<21;f+=1)if(abs(z.y)>17.7&&(f==1||f>3)){
          if (f==1){l=1.;break;}
          l=length(z)/40.;//clouds and face
          break;}
      else{
          z=vec2(-1./(z.x*z.x-z.y*z.y-g.x+t.x/5.),2.0*z.x*z.y-g.y-t.y/5.);
          l=abs(z.y)*6.;//smooths middle horn, removes some clouds
          if(z.x>-.1)l=z.x*200.;}//face with closed small holes
      return vec3(1.-l);
      }
    
      vec3 clouds(vec2 g, vec2 t){
      float d = 0., negator = 1.;
      vec2 z=g.xy;
      //if(g.x*g.x+g.y*g.y<40.)
      if(abs(z.y)<17.7)
          z=vec2(-1./(z.x*z.x-z.y*z.y-g.x),2.0*z.x*z.y-g.y);
      if(abs(z.y)>17.7) {
         // z=vec2((z.x*z.x-z.y*z.y-g.x),2.0*z.x*z.y-g.y);
          d=length(z)*441.144;
          }
      else negator = 0.;
     return vec3(-sin(d +time*3.+6.28318/3.),-sin(d+time*3.+6.28318*2./3.),-sin(d+time*3.))*negator;

      }

 vec3 shiny(vec2 p,vec2 t){
     vec2 s = p;
     float l=0., d = 0., negator = 1.;
         for (int f=0;f<21;f+=1)
         if(abs(s.y)>17.7&&(f==1||f>2)){
             l=1.-length(s)/40.;
             if (f == 1)
                     negator=0.;
             else
                     d+=length(s)/10.;
             break;
         }
         else{
             s=vec2(-1./(s.x*s.x-s.y*s.y-p.x+t.x/5.), 2.0*s.x*s.y-p.y-t.y/5.);
             l=abs(s.y)*3.5;//refines middle horn, optional
             if(s.x>-.1)l=s.x*50.;//closes small holes
             d+=length(s)/10.;
         }
         if (l>.54) negator = 0.;
         return vec3(-sin(d *3.+PI2/3.+time2dance),-sin(d*3.+PI2*5./3.+time2dance),-sin(d*3.+time2dance))*5.*negator;
 }

    
vec3 faceHeights(vec2 g, vec2 t){
float l = 1.;
g*=4.;
vec2 z=g.xy;
for (int f=0;f<21+6*5;f+=1)if(abs(z.y)>17.7&&(f==1||f>3)){
    //if (f==1){l=0.;break;}
    l=1.-length(z)/40.;//clouds and face
    break;}
else{
    z=vec2(-1./(z.x*z.x-z.y*z.y-g.x+t.x/3.),2.0*z.x*z.y-g.y+t.y/3.);
    l=abs(z.y)*5.;//smooths middle horn, removes some clouds
    if(z.x>-.1)l=z.x*50.;}//face with closed small holes
return vec3(clamp(1.-l,0.,1.));
}
    
vec3 faceFORWARD(vec2 p,vec2 t){
    //t*=2.;
    vec2 s=p;
        float l=0.;
        for (int f=0;f<3+6*52;f+=1)
            if( ((f<3+6*int(log(zoom)/log(.3247))&&musicAngelMan==0)||(musicAngelMan>0&&f<3)))//turn f<15 or f<21 for alternative just seven eyedfullness
                s=vec2(-1./(s.x*s.x-s.y*s.y-p.x+3.*t.x), 2.0*s.x*s.y-p.y-t.y*2.);//this is {s=s^2-p;s.real=-1./s.real}
            else break;
               
        float centralPowerInverter=(s.x/s.y)*sign(s.x*s.y)*1.5;
            //I was studying this function without the face and a power short ocurred and on firefox window restore and caused a semi-reversion hybridization
            if(Character==3||musicAngelMan==1)centralPowerInverter*=.5;
            else if(Character==4||musicAngelMan==2)centralPowerInverter*=2.;
        l=
            centralPowerInverter;
            
            if(musicAngelMan>0){
                if((Character==3||musicAngelMan==1)&&l<.01)l=1.;
                else if((Character==4||musicAngelMan==2)&&l<.04)l=0.;
                }
            else
            {
                    if(Character==3&&l<.04)l=1.;
                    else if(Character==4&&l<.16)l=0.;
            }
            
            if (l>1.)l=1.;
            
               if((Character==3||musicAngelMan==1))return vec3(1.-l);
               else if((Character==4||musicAngelMan==2))return vec3(l);
         return vec3(.5,0.,0.);//return red if run in  error
    }
    vec3 faceFORWARDstatic(vec2 p,vec2 t){
        if(musicAngelMan==0)
        {t.y*=-.5;
            t/=1.;}
        vec2 s=p;
            float l=0.;
            for (int f=0;f<3+6*2;f+=1)if(musicAngelMan==0||f<3) s=vec2(-1./(s.x*s.x-s.y*s.y-p.x+t.x), 2.0*s.x*s.y-p.y-t.y*2.);//this is {s=s^2-p;s.real=-1./s.real}
                           
            float centralPowerInverter=(s.x/s.y)*sign(s.x*s.y);
                //I was studying this function without the face and a power short ocurred and on firefox window restore and caused a semi-reversion hybridization
                if(Character==3||musicAngelMan==1)centralPowerInverter*=.5;
                else if(Character==4||musicAngelMan==2)centralPowerInverter*=2.;

            l=
                centralPowerInverter;
                //l*=l*l;
                
                    if((Character==3||musicAngelMan==1)&&l<.02)l=1.;
                    else if((Character==4||musicAngelMan==2)&&l<.8)l=0.;
                    
                if (l>1.)l=1.;
               
                  if((Character==3||musicAngelMan==1))return vec3(1.-l);
                  else if((Character==4||musicAngelMan==2))return vec3(l);
            return vec3(.5,0.,0.);//return red if run in  error
        }


                vec2 freed(vec2 p){
                    if(free){
                        float shift = 3.;
                        p+=shift/2.;
                        p=(mod(abs(p),shift));
                        p-=shift/2.;
                    }
                    return p;
                    }

                    vec3 torso(vec2 g, vec2 t){
                    float b = 0.;
                    vec2 z=g.xy;
                    if(g.x*g.x+g.y*g.y<40.)
                    for(int f=0;f<12;f+=1)if(abs(z.y)>52.&&f>4){b=abs(z.y)/77.;break;}
                    else{
                        z=2.*vec2(-1./(z.x*z.x-z.y*z.y-g.x+t.x),(2.0*z.x*z.y-g.y+t.y));
                        z.x=sqrt(abs(z.x));}
                    return vec3(b,b/2.5,0.);
                    }
    
                    vec3 musculature(vec2 g, vec2 t){
                    float m=0.;
                    g.x+=.5;
                    vec2 z=g.xy;
                    if(abs(g.y)<2.5)for(int f=0;f<21;f+=1)if(abs(z.x*1.5+z.y)>11.&&f>8)m=abs(z.y)/20.;
                    else{
                    z=1.3*vec2(-1.5/(1.*z.x*z.x-2.*z.y*z.y-g.x+t.x),1.9*z.x*z.y-1.87*g.y+t.y);
                          z.x=pow(abs(z.x),.57 );}
                    return vec3(m,m,m/2.);
                    }
                    vec3 robe(vec2 g, vec2 t){
                    float r=0.;
                    g.x+=.05;
                    g.y/=1.14;
                    vec2 z=g.xy;
                    if(abs(g.y)<3.)for(int f=0;f<70;f+=1)if(abs(z.y)>11.&&f>7){r=clamp(1.7-abs(g.x-2.3)
                                     //*(1.-abs(g.y*g.x))-.07//(un)comment this line to toggle sleeves
                                    ,0.,1.);break;}
                    else{
                        z=1.1*vec2(-2./((z.x*z.x-1.8*z.y*z.y)-g.x),(3.*z.x*z.y-1.3*g.y+t.y));;
                        z.x=pow(abs(z.x),.8);}
                    return vec3(r);
                    }
                    vec3 legs(vec2 g, vec2 t){
                    float b=0.;
                    g/=2.;
                    vec2 z=g.xy;
                    if(g.x>.75&&g.x<1.7&&abs(g.y*g.x)<.58)for(int f=0;f<18;f+=1)if(abs(z.x)>52.&&f>1){b=abs(z.x)/70.;break;}
                    else{
                        z=3.*vec2(-1./(z.x*z.x-z.y*z.y-g.x+t.x*sign(-g.y)),77.*z.x*z.y-g.y+t.y);
                        z.y=-1./z.y;}
                    return vec3(b/2.,b,b/2.);
                    }

    /*
    vec3 hsv2rgb (vec3 hsv) {
      // from HSV to RGB color vector
      hsv.yz = clamp (hsv.yz, 0.0, 1.0);
      return hsv.z * (1.0 + 0.63 * hsv.y * (-cos (2.0 * 3.14159 * (hsv.x + vec3 (0.0, 2.0 / 3.0, 1.0 / 3.0))) - 1.0));
    }//^^^^^^above from https://shadertoy.fandom.com/wiki/Color_Processing^^^^^
*/
    
    
    
    
    vec3 balloons(vec2 p){
        vec3 balloon=vec3(0.);
        vec2 vUvCentered =vUv-.5;
        float sizeReset = 0.;
        if (balloonsON==-1.||balloonsONexponential==-1.)sizeReset=120.;
          float x =  length(vUvCentered*resolution/min(resolution.x,resolution.y));
          float increment =0.;
          vec2 spinningSpiraloon  =  spin2(vUvCentered,time*PI*4.);

          if(balloonsON!=0.) increment =note*balloonsON +120.+ twistStar - x*48.;
          else if(balloonsONexponential!=0.)
              increment= (note-4.-3.*balloonsONexponential)*balloonsONexponential+log(twistStar+x*24.)/log(pow(2.,1./12.));
        
               
                   
                   if(abs(mod(increment+atan(spinningSpiraloon.x,spinningSpiraloon.y)/(2.*PI)*(balloonsONexponential),1.)-.1)<length(1.)/(increment+sizeReset)*24.)balloon=hsv2rgb(vec3((mod((4.-increment)*(balloonsON+balloonsONexponential)+twistStar,12.))/12.,.5,1.));
        return balloon;
    }
    
    //['y/((y/(y*x))-y)+1/(1-(1/(y*x)))', '1/(1-(y/(y-x)))-y/(1-(y/y))', 'y/(y-(y/(y*x)))+1/((1/(y*x))-1)', '1/(1-(y/x))+1/((y/x)-1)', 'y/((1/x)-y)+1/(1-(1/(y*x)))', '1/(x+(1/y))+1/(1-(y/y))', '1/((y/x)-1)+1/(1-(y/x))', 'y/(y-(1/x))+1/((1/(y*x))-1)', 'y/((y/y)+y)-y/((1/(y*x))-1)'] tree of life 5 results
    vec3 sparkles(vec2 p){
        vec4 starship = vec4(0.);
        float recenter = 0.;
        float rescale = 1./3.;
        vec2  starshipLOOKUP = ((vUv-.5)+vec2(0.,recenter))*rescale+.5;//starship may not be an improvement, try with disabled below
         /* if (starshipLOOKUP.x<1.&&starshipLOOKUP.y<1.&&starshipLOOKUP.x>0.&&starshipLOOKUP.y>0.)starship = texture2D(STAR,starshipLOOKUP);
          if (starship.x==0.&&starship.y==0.&&starship.z==0.)starship=vec4(1.);//s
          */
        float timeDilated = time*10.;
         p=(mod(timeDilated,1.)-.5)*abs(p)+length(vec2(length(starship.xy),starship.z));
            p=vec2(p.x,abs(p.y));
            vec2 s=p;

        float l=0.;
          float love1 =  mod(timeDilated*.3247,1.);
                  float love2 =  mod(timeDilated*.618,1.);              float love3 =  mod(timeDilated,1.);
        for (int f=0;f<15;f+=1){//turn f<21 for just seven eyed
                    s=love2*vec2(-1./(s.x*s.x-s.y*s.y-p.x), 2.0*s.x*s.y-p.y);//this is {s=s^2-p;s.real=-1./s.real}
            s=-vec2(s.y/((s.y/(s.y-s.x)*love3-(s.y))), -pow(abs(s.y/(s.y/(s.x-s.y)*love3-s.y*love2)),2.*1./love3));//this is {s=s^2-p;s.real=-1./s.real}
            //  s           *= vec2(s.y,s.x);
                  }
                s=-vec2(s.y/((s.y/(s.y-s.x)*love3-(s.y))), -pow(abs(s.y/(s.y/(s.x-s.y)*love3-s.y*love2)),2.*1./love3));//this is {s=s^2-p;s.real=-1./s.real}
        float centralPowerInverter=(s.x/s.y)*sign(s.x*s.y)*2.618;
            //I was studying this function without the face and a power short ocurred and on firefox window restore and caused a semi-reversion hybridization
        l=1.;// / //1.-
           // centralPowerInverter;
        return vec3(vec2((s.x*love1),abs(s.y*love2)),vec2(s.x*s.x*love1)*l);
    }

    

vec3 sealedMan(vec2 p,vec2 t)
{
p.x+=2.;
float r=.0, b=.0, l=.0, h=0.;
//person--a body derived to have a head of its own
vec2 z=p;
for(int f=0;f<20;f+=1)if(abs(z.y)>50.&&f>4)l=1.;
else{z=2.*vec2(1./(z.x*z.x-z.y*z.y-p.x+t.x),2.0*z.x*z.y-p.y+t.y);
     z.x=pow(abs(z.x),.59);}
    
//robe--came from the body as soon as I looked for clothing
vec2 g=p;
g.x+=.05;
g.y/=1.14;
z=g;
if(g.x>.5)for(int f=0;f<70;f+=1){if(abs(z.y)>11.&&f>7)r=clamp(1.44-abs(g.x-2.3)
                             *(1.-abs(g.y*g.x))-.07
                            ,0.,1.);
else{
z=1.1*vec2(-2./((z.x*z.x-1.8*z.y*z.y)-g.x+t.x),(3.*z.x*z.y-1.3*g.y+t.y));
z.x=pow(abs(z.x),.8);}}
//horse
g=p;
g.x-=3.5;
g.y/=1.14;
z=g;
if(g.x*g.x+g.y*g.y<3.)for(int f=0;f<23;f+=1){if(abs(z.y)>11.&&f>7)h=1.;
else{
z=1.0*vec2(1./((z.x*z.x-3.*z.y*z.y)-g.x+t.x),2.*(z.x*z.y-g.y+t.y));
z.x=pow(abs(z.x),.8);}}
//legs--I found these about hours before finding the body but left them, recovering them from memory
g=p/2.;
z=g;
if(g.x>.75&&g.x<1.7&&abs(g.y*g.x)<.54)for(int f=0;f<8;f+=1){if(abs(z.x)>52.&&f>1)b=abs(z.x)/100.;
else{
z=3.*vec2(-1./(z.x*z.x-z.y*z.y-g.x+t.x),77.*z.x*z.y-g.y+t.y);
z.y=-1./z.y;}
}
return vec3(l+b+r+h);}
    vec3 sealedWoman(vec2 p,vec2 t){
                 p.x+=1.;
                    
                   vec2 g=p/2.2;
                   vec2 s=g;
                   float l=0.;
                   float n=.0, c=.0, r=.0, x=.0;
                   //vv legs vv
                   if (g.x<1.8 &&g.x>.5 &&abs(g.x*g.y)<.5)for (int f=0;f<10;f+=1){if(abs(s.x+s.y)>200.&&f>4)c=1.;
                     else {s=vec2(-1./((s.x*s.x-s.y*s.y)-g.x+t.x),(67.0*s.x*s.y-.7*g.y+t.y));s*=3.; s.y = -1./s.y; }
                                  }
                    g = p;
                   s=g;
                   if(g.x*g.x+g.y*g.y*4.<2.||g.x>0.){
                   //vv body vv
                       for (int f=0;f<21;f+=1){if(abs(s.x+s.y)>12.&&f>7)l=1.;
                          else {s=vec2(-1.5/((s.x*s.x-2.*s.y*s.y)-g.x+t.x),(1.7*s.x*s.y-1.2*g.y+t.y));s*=1.3; s.x=pow(abs(s.x),.6125 );  }
                          }
                g=p;
                        s=g;
                   //vv body vv
                       for (int f=0;f<30;f+=1){if(abs(s.x+s.y)>20.&&f>4)x=1.;
                       else {s=vec2(-1.5/((s.x*s.x-2.*s.y*s.y)-g.x+t.x),(1.7*s.x*s.y-1.34*g.y+t.y));s*=1.7; s.x=pow(abs(s.x),.549 );  }
                       }
                     }
                         //vv robe vv
                   g=p;
                   g.x+=-.3;
                   s=g;
                   if (g.x>.50)for (int f=0;f<20;f+=1){if(abs(s.x+s.y)>11.&&f>7)r=clamp(1.4-abs(g.x-2.3)
                                                                                         *(1.-abs(g.y*g.x))-.07
                                                                                        ,0.,1.);
                   else {s=vec2(-2./((s.x*s.x-2.4*s.y*s.y)-g.x+t.x),(3.*s.x*s.y-1.3*g.y +t.y));s*=1.11; s.x=pow(abs(s.x),.8 );
                       }
                   }
                                  vec3 o =vec3(clamp(l+x+r+c,0.,1.));
                   return o;
               }
            
                                  
                    
                                  
                            
vec3 tol(vec2 p, vec2 t){
                        vec2 resCale = (resolution.yx/max(resolution.x,resolution.y));
                     vec3 uber    = texture2D(uberDuper,(
                        ((vUv-.5)/resCale*zoom/duperZoom
                         -coordSHIFT)*resCale+.5
                                              )
                        ).xyz;
                        
                         vec2 pWithoutChiralizer = p;
                         if(chirality==-1){p=p.yx;}
vec2 colorAccumulator =vec2(1.);
vec3 heartColors = vec3(0.);
float lfc = length(freed(coords));

   
   
float precores = .25/log(.5);

if(morph!=0.)precores=precores-3./log(.5);
if(refactorCores!=1.)precores=-.0;

float cored =0.;
if(MetaCored)cored= log(zoom)/-log(2.)+precores;
else cored = centralCores;
float loops=0.;
if(cloverSlide)loops=-1.;
if(refactorCores>1.)
    {
        if(cloverSlide)p/=2.;
        p/=2.;
    }
else if (refactorCores==0.) p/=3.;

vec2 s=p;

float c = length(s);

float coresIn = 0.;
const float crs = 57.;//this is the mandelbrot and original inheritance colormode core range
// if(c>4./3.){s/=2.;c/=2.;}//Engage one UpCore, the rest of zoom cycle in StarshipMod.js
 float centerslide = 0.;

 for(int i=0;i<int(crs);//crs+3=63
                  i++)if(c<2./3.
                         &&loops+centerslide<cored
                         )
                        {
  if(i>1||!cloverSlide){s*=2.;c*=2.;}

  if (cloverSlide)
    {
        
        /*if(refactorCores>0.)
        {
        if(loops+centerslide>cored-1.)
        
            centerslide-=c*2.;
        else
        centerslide-=c/4.;
        }
        else if()        centerslide-=c*2.;

         */
        centerslide-=c;

        }

                      loops++;coresIn++;
                        }
 else break;
// if(refactorCores!=1.){s*=(1.+lfc/2.);c*=(1.+lfc/2.);}

if(refactorCores>1.){
    float shift = (1.25+.5*zoom/(zoom+lfc));//centered at 1.5, just a guess really
    s*=shift;c*=shift;
}
else if (refactorCores==0.){//for double slide core
    s*=1.5;c*=1.5;
}


if(fieldPowerBoost){
    float powerBoost =2.71828*(log(.5)/length(s));
    s*=pow(length(s),powerBoost);
}

 coresIn+=60.+upCoreCycler;
//  else if(zoom>1.)for(int i=0;i<int(crs); i++)if(c>4./3.&&loops<-cored){s/=2.;c/=2.;loops++;coresIn++;}else break;//UpCore not in use here, but rather in the starshipMod
//for(int i=0;i<int(crs); i++)if(c<2./3.&&loops<cored){s*=2.;c*=2.;loops++;coresIn++;}else break;

if(SPHEREofTheLORD)s *= (length(s)-zoom/length(coords.yx)/2.);

if(squareClover)s/=vec2(sqrt(2.-s.x*s.x),sqrt(2.-s.y*s.y))/s;


vec2 pCenterCored=s;


vec2 pcs=vec2(0.);
if(clvrVariant7)pcs=vec2(
           pCenterCored.x*pCenterCored.x*pCenterCored.x  - 3.*pCenterCored.x*pCenterCored.y*pCenterCored.y,
          -pCenterCored.y*pCenterCored.y*pCenterCored.y+ 3.*pCenterCored.x*pCenterCored.x*pCenterCored.y
          );





//float CORE_DELIMITER=1./1.3247179572447460;// /(1.618033988749+.618033988749);

   /*if(morph<.5)
   CORE_DELIMITER=1./1.32471795724474;//try different truncations of  -1.3247179572447460259609088544780973407344040569017333645340150503028278512455475940546993479817872803299109209947422074251089026390458977955943147570967234717541668390388674187517369315842535499082466223545337273504589879909568150627745509802486213012169894157524574548625075626524610368938904839932269952074975962828868556908150704513696109853352577281586033441141927828273765296032993584674231028483241695239006108543338219;
else {
CORE_DELIMITER=2./3.;//t*=1.5;
}
*/
loops=0.;
float hyperCore=0.;






float logStabilizationConstant = 1./log(3.)+(1.-1./log(3.))/2.;

//.9551195 is based on 1./log(3.)==0.910239 So (1.-.910239)/2+.910239=.9551195 May be incorrect but is close to right.
//log stabalization constant seems to be 1./log(3.)+(1.-1./log(3.))/1.5 from 1./log(3.)+(1.-1./log(3.))/2.
//if(morph!=0.)cored*=3./2.;//stabilize morph dance collaboration

//2.47805268028830 and 3 are solutions to x=log3(x**3)
//float  CORE_DELIMITER=texture2D(coreTextureSampler,vec2(floor(hyperCore)/40.,0.)).x;




   float dif = 1.;//3.-(1.-.47805268028830)/3.;
if(MetaCored)hyperCore=
   cored/1.5+log(lfc)*logStabilizationConstant;
    
else hyperCore=externalCores;//hyperCore is really better thought of as hyperMetaCore

//cored/1.5+log(length(coordSHIFT))*logStabilizationConstant+uber.z;
//float  CORE_DELIMITEReq=texture2D(coreTextureSampler,vec2(floor(0.)/40.,0.)).x;
float equilibriator = 1.;
//if(lfc>2./3.)equilibriator=lfc/(lfc-zoom/dif)*dif;
   hyperCore*=equilibriator;
   
     hyperCore-=.5/log(.5)/equilibriator;
    if(cloverSlide&&wheel)hyperCore+=1.75/log(.5);

   else if(cloverSlide||wheel)hyperCore+=1./log(.5);
 //  else if(wheel)hyperCore+=.25/log(.5);

   if(multiplicatorNexus)hyperCore-=.5/log(.5);
   if(continuumClover)hyperCore-=.75/log(.5);

//if(fieldPowerBoost)hyperCore+=1./log(.5);
   
if(outerCoresOff)hyperCore=0.;

if(Spoker)
hyperCore*=4./3./(1./log(3.)+(1.-1./log(3.))/1.75);//engage overstable core if dancing log terms based on logStabilizationConstant may or may not be accurate
 //if(morph>.5&&!wheel)hyperCore+=4.;
 float term=0.;

vec2 m=vec2(0.);

float truncator=1.;
if(lfc!=0.) truncator = log(zoom/lfc)/10000.;//log truncation * factor is not known
//Maendel clover
if(wheel)m =  ((pWithoutChiralizer/lfc)
                                         -coords.yx)*abs(coresIn/crs*2.-1.)
                            *mandelCloverFactor//(1.-1./(leaf/truncator)*truncator)//uncertain term

                            ;
//this is essentially just p as in the mandelbrot x <== x^2+

                            const float iterations = 100.;//loops all escape delimiter so iterations aren't used unless needed
                            float refractelC=1.5;
                        //  p*=2.*refractelC;
vec3 oo = vec3(0.);
 float continuumCounter=0.;

vec4 starship=vec4(0.);
float minToMax=min(resolution.x,resolution.y)/max(resolution.x,resolution.y);
vec3 beta =vec3(1.);




float dstnce = length(s);//"distance" may be reserved keyword
//t*=.74;
float coreBooster=0.;
float metaCoreDriveFactor =(((1.-leaf)/truncator)*truncator)/gr;//.324717.... number of places changes appearance
float spoke_factor =metaCoreDriveFactor*(((-2.*gr-3.*leaf))/truncator)*truncator*1.;//1.+pow(metaCoreDriveFactor-1.,1.5/(2.+.47805268028830/2.));
float hyperCoreOUTPUT =hyperCore*log(2.)/log(metaCoreDriveFactor)+loops;
                             hyperCoreOUTPUT-=(6.-petals)/6.;//upcore for higher omniclover counts

float hyperCoreBoosted = hyperCoreOUTPUT;//if metaCoreDriveFactor==1.5: hyperCoreBoosted=hyperCore*1.75 else if metaCoreDriveFactor==2.: hyperCoreBoosted=hyperCore;

float colorShift = 0.;
vec2 multCrossTwist=vec2(0.);
if(multiplicatorNexus)//doesn't seem to upcore spokes like intended
{
     multCrossTwist=spin2(s,atan(s.x,s.y)*1.5*petals/(6.+petals))*sign(.5-morph)//*equilibriator/CORE_DELIMITER
     /dstnce;
            multCrossTwist*=multCrossTwist;
                          coreBooster=length(multCrossTwist)/log(.5)*lfc;

    
}
                          
                          
                          
                             //if(zoom<.00000075)
                             //if(zoom<.00000075)
                        /*  hyperCoreBoosted=uber.z+
                            (
                             log(duperZoom)/log(.5)*2./3.+log(length(coordSHIFT))
                             *4./3./(1./log(3.)+(1.-1./log(3.)  ))/1.75
                             )*log(2.)/log(metaCoreDriveFactor)+loops;
                             */
if(zoom<.00000075*lfc)  s = uber.xy;//engage super duper core!
else      for (float counter=0.;counter<iterations;counter++)if(dstnce<50.){

    float OmniDynamicPetalShift =texture2D(omniDynamic,vec2((loops+counter-1.)/40.,0.)).x;
    float OmniPetal =OmniDynamicPetalShift*((petals+6.)/6.);
    
  float  CORE_DELIMITER=texture2D(coreTextureSampler,vec2(floor(loops+counter)/40.,0.)).x;

         if(multiplicatorNexus)hyperCoreBoosted = hyperCore+coreBooster*dstnce;

                           // if(!true&&morph<.5)CORE_DELIMITER=1./dstnce*pow(2.,4./12.)*equilibriator;
                            
                            if(spirated!=0.&&dstnce<2./3.)//CORE_DELIMITER)  //works well<(n-1)/n
    s*=dstnce*2.*PI/(atan(s.y,s.x)-PI*spirated);
    dstnce = length(s);

           vec2 cloverMAP = (spin2(vec2(s.y,-s.x),-atan(s.y,s.x)*OmniPetal/(6.+OmniPetal)-atan(d.x,d.y)+PI))*CORE_DELIMITER+.5;
                                   
                                   vec2 ColorWheelClover;
                                   float cycleShiftChiral = 0.;
                                   
                                if(NightAndDay){
                                            if(chirality!=-1){
                                                
                                                    if (flipStar!=0.)cycleShiftChiral=0.;
                                                    else cycleShiftChiral=PI;
                                                ColorWheelClover=spin2(vec2(-s.y,-s.x)*flipStar,(atan(s.y,s.x)*OmniPetal/(6.+OmniPetal)+atan(d.x,d.y)+cycleShiftChiral)+(1.-abs(starSpin))*twistStar*flipStar);//clover actually seems to have down to the right so it may need to be rotated by pi/x
                                                }
                                            else {
                                                
                                                    if (flipStar!=0.)cycleShiftChiral=PI/4.;
                                                    else cycleShiftChiral=-PI;
                                                    ColorWheelClover = spin2(vec2(-s.x,-  s.y)*flipStar,(atan(s.x,s.y)*OmniPetal/(6.+OmniPetal)-atan(d.y,d.x)+cycleShiftChiral)+(1.-abs(starSpin))*twistStar*flipStar);
                                                }
                                            if(dstnce<4./3.)    beta   =  hsv2rgb(vec3((atan(ColorWheelClover.y,ColorWheelClover.x))/(2.*PI),1.,1.));
                                }
 if(dstnce<CORE_DELIMITER||(spokesVisualizeColors&&dstnce<4./3.)) {
            float decayCanceller=1.;
            if(spokesVisualizeColors)decayCanceller = 2.;
            //if(morph!=0.)decayCanceller=decayCanceller*decayCanceller;
               if(eden==0)starship+=texture2D(STAR,cloverMAP)/decayCanceller;
               else if(eden==1)starship+=texture2D(EDEN,cloverMAP)/decayCanceller;//*length((vUv-.5)*max(resolution.x,resolution.y)/min(resolution.x,resolution.y));//+texture2D(STAR,cloverMAP);
            
           }

if(onehundredfortyfourthousand)
{
 
 int march= int(mod(hyperCoreBoosted,4.));
 float color = 1.;
 if (march==1||march==3)color = -1.;
 if(dstnce<2./3.)
 {
     vec2 move =-d.yx*volume/8.;
    // if(march==0||march==3)oo+=color*sealedMan(s*5.,move);
    // else oo+=color*sealedWoman(s*5.,move);
 }
                          
}

   colorAccumulator+=s;
   if(Refractelate&&dstnce>refractelC){s/=refractelC;} //refractelC/=4./3.;}
vec2 lastS = s;

   s=vec2(
        s.x*s.x*s.x  - 3.*s.x*s.y*s.y,
       -s.y*s.y*s.y+ 3.*s.x*s.x*s.y
       );
      // if (mod(counter,5.) == 4.)s =pCenterCored;
       //x**3
   
       if(clvrVariant4)  s*=1.75;
       if(clvrVariant5) s = vec2(pow(s.x,-2.),pow(s.y,-2.));
      if(clvrVariant6)s=s-lastS.yx;
        if(clvrVariant7)s+=pcs;
        
        if(clvrVariant8) if(length(s)<1.)s+=1.;

      if(clvrVariant1)  s*=length(lastS);
      if(clvrVariant2)s -=zoom/coords.yx;
      if(clvrVariant3)s-=pCenterCored*dstnce;

   
       if(dotted)s/=dot(-m,t)*dot(m,-t);

       if(morph!=0.&&!wheel)s-=t;
        else s+=t-m;
                             
                             
       if(Clovoid)s.x=(sqrt(2.*abs(1./s.x)));//this is the body steps on the clover
       else if(colorCombo==8||colorCombo==9)s.x=-1./s.x;//this is just the face (without or with +c), inheritance is the only
   

   s.x=log(abs(s.x))/log(baseN);
   //traditionally be e or 3 probably 1.5 to 4
   

if(Spoker){
    if(morph==0.){
            if(1.<=hyperCoreBoosted)
                         {
                             
                         if(wheel){
                             s/=2.;
                             
                             hyperCoreOUTPUT-=log(spoke_factor);

                             hyperCoreBoosted-=log(spoke_factor);
                             }
                         else{
                             
                          s/=spoke_factor;//engage spokecore s/=2.+'superspokes'
                         
                         hyperCoreOUTPUT-=spoke_factor;

                         hyperCoreBoosted-=spoke_factor;
                         }
                         }
        else  {
            
                if(wheel){
            hyperCoreOUTPUT+=log(spoke_factor);
            hyperCoreBoosted+=log(spoke_factor);
            }
                else{
            hyperCoreOUTPUT+=spoke_factor;
            hyperCoreBoosted+=spoke_factor;
            }
            }
}
else//for dancer only
{
   
hyperCoreOUTPUT-=spoke_factor;
hyperCoreBoosted-=spoke_factor;}

   }

if(spokelover&&counter<hyperCoreBoosted){
     if(continuumClover) s*=sqrt(2.);//engage shiny spokelover
     else s/=sqrt(2.);
     }

   if(continuumClover){//engage continualization
       float continuumCore=(continuumCounter+hyperCoreOUTPUT)*zoom/(lfc-zoom);
       if(loops+counter<=hyperCoreBoosted+continuumCounter) s/=pow(2.,pow(.5,continuumCore));
       hyperCoreBoosted+=continuumCore;
    }
  
dstnce = length(s);

                             //              s*=refactorCores;c*=refactorCores;
                             
                             
                             if(petals!=0.&&dstnce<4./3.)s=spin2(s,atan(s.y,s.x)*(petals)/6.);
                             //if(exponentialPetals!=0.)s=spin2(vec2(s.x,exponentialPetals*s.y),
                                //                                                                                             2.*PI*pow(2.,(xenOctaveFactor-atan(s.x,exponentialPetals*s.y)))/pow(2.,xenOctaveFactor));

                            //if(exponentialPetals!=0.)s=spin2(vec2(s.x,s.y*exponentialPetals),log(atan(s.y*exponentialPetals,s.x)/PI));
                             
                             if(dstnce<4./3. &&exponentialPetals!=0.) s=spin2(s,pow(2.,(atan(s.y,s.x)/PI+1.)*2.));
                             //if(dstnce<4./3.)s=spin2(s,pow(2.,atan(s.y,s.x)));

for(int i=0;i<40; i++)//not sure if i is 20 or >20
if(dstnce<CORE_DELIMITER&& 0.<=hyperCoreBoosted)
{
//if(i==0){float b = ;s*=b;dstnce*b;}
 s*=metaCoreDriveFactor;dstnce*=metaCoreDriveFactor;
 hyperCoreBoosted--;loops++;
 

OmniDynamicPetalShift =texture2D(omniDynamic,vec2((loops+counter-1.)/40.,0.)).x;
OmniPetal =OmniDynamicPetalShift*((petals+6.)/6.);

  if(dstnce<4./3.&&OmniDynamicPetalShift!=0.)s=spin2(s,atan(s.y,s.x)*OmniPetal);

 if (cloverSlide)
   {
       if(float(i)>hyperCoreBoosted)
       {
           float b = 2.*dstnce;
           loops-=b;
       hyperCoreBoosted+=b;
       }
       else{
           float b =dstnce/4.;
           loops-=b;
       hyperCoreBoosted+=b;
       }
       
   }
   
   if(fieldPowerBoostMeta&&(float(i)>=hyperCoreBoosted)){
       float powerBoost =2.71828*(log(.5)*dstnce*(sqrt(2.))/1.5);
       s*=pow(dstnce,powerBoost);
       dstnce*=pow(dstnce,powerBoost);

   }
  float wise = 1.;
  
  if(mod(float(i),4.)==0.)wise=1.;
  else if(mod(float(i),4.)==1.)wise=-1.;
  else  if(mod(float(i),4.)==2.)wise= -1.;
  else  if(mod(float(i),4.)==3.)wise=1.;
  
  
  if(metaCarousel!=0.
     &&(float(i)>=hyperCoreBoosted+1.))     //this clause establishes that the loop only be run on the last iterational loops, showing some sort of terminal core number as hyperCore-loops-counter maybe
        s=spin2(s,time*wise*metaCarousel*(1.+OmniPetal/6.)*rate);

}
else{
 break;
 }

hyperCoreBoosted--;
hyperCoreOUTPUT--;
                             colorShift+=hyperCoreBoosted;
                             

}else break;
                  
///if(multiplicatorNexus)s*=colorShift/88.8;
vec3 o = vec3(colorAccumulator.x*colorAccumulator.y);
                     if(colorCombo==-7) o=vec3(s.y,s.x/9.5,1.-s.x/12.);
                             else if(colorCombo==0) o=vec3(s.x/s.y)*sign(s.x*s.y)*22.;
   else if (colorCombo==-10)o = vec3(0.);
                     else if(colorCombo==-2) o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.);
                     else if(colorCombo==-3) o= vec3(s.x/8.-s.y/s.x/7000.,1.-s.x/16.,s.y/100.);
                     else if(colorCombo==-4) o= vec3(1.-s.x/20.,s.x/8.-s.y/s.x/2000.,s.y/35.-s.x*s.y/888.);
                     else if(colorCombo==-5)  o=vec3(s.y/40.-s.x*s.y/888.,1.-s.x/21.,s.x/6.-s.y/s.x/2000.);
                     else if(colorCombo==-6) o=  vec3(-sin(time*1.)*s.y/100.-sin(time*gr)*s.x*s.y/888.,s.x/8.-sin(time*(-gr+1.))*s.y/s.x/2000.,1.-sin(time*(gr+1.))*s.x/20.);
                    else if(colorCombo==-1) {
                              o=       (1.-(vec3(s.y/125.-s.x*s.y/888.+s.y/25000.,s.x/8.-s.y/s.x/2000.-s.y/25000.,1.-s.x/20.+s.y/25000.)
                                                *vec3(1.-s.x/20.,s.x/8.-s.y/s.x/2000.,s.y/35.-s.x*s.y/888.)
                                                *vec3(s.y/40.-s.x*s.y/888.,1.-s.x/21.,s.x/6.-s.y/s.x/2000.)));;
                                                }
                                else if(colorCombo==-8) {
                                            s=-colorAccumulator*(coresIn+1.)*((coresIn+2.)/(60.+1.)-.5);

                                            o= (1.-(vec3(abs(s.y)-s.x*s.y/888.+s.y/25000.,s.x/20.-s.y/s.x/2000.-s.y/25000.,1.-s.x/20.+s.y/25000.)
                                                         *vec3(1.-s.x/20.,s.x/8.-s.y/s.x/2000.,s.y/35.-s.x*s.y/888.)
                                                         *vec3(s.y/40.-s.x*s.y/888.,1.-s.x/21.,s.x/6.-s.y/s.x/2000.)));
                                                              }
   else if(colorCombo==-9) {
  //   if(wheel)heartColors=(vec3(s.x*s.y,s.x+.2,s.y-.3*(1.-s.x))+.3)/length(s);

   float colorFlip=-abs(coresIn-crs/2.)*sign(coresIn/crs*2.-1.);
         s=colorAccumulator*(coresIn/crs*2.-1.);

                  o=((coresIn-(crs/2.))/(crs/2.)-vec3(-s.x,s.y,-s.x*s.y).zxy//try swizzling these
                  *sign(crs/2.-coresIn))
                  *(1.-vec3(s.y-s.x*s.y/888.+s.y/25000.,s.x/8.-s.y/s.x/2000.-s.y/25000.,1.-s.x/20.+s.y/25000.)
                               *vec3(1.-s.x/15.,s.x/8.-s.y/s.x/20.,-abs(s.y)/35.-s.x*s.y/100.)
                               *vec3(s.y/40.-s.x*s.y/888.,1.-s.x/21.,s.x/6.-s.y/s.x/200.));
                      }
                      
                      
                    
                      
                      
                      
                      
                      ///
                      else if(colorCombo==-11) o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.).yxz;
                      
                      else if(colorCombo==-12) o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.).zxy;
                      else if(colorCombo==-13){
                      o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.);
                      o=1.-o.yxz*o.zxy*o.yzx;
                      }
                      else if(colorCombo==-14){
                      o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.);
                      o=1.-o.yxz*o.zxy*o.xyz;
                      }
                      else if(colorCombo==-15){
                      o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.);
                      o=1.-o.yxz*o.zxy*o.xzy;
                      }
                      else if(colorCombo==-16){
                      o=vec3(s.y/100.-s.x*s.y/888.+s.y/50000.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.+s.y/50000.);
                      o=1.-o.xyz*o.zxy*o.yzx;
                      }
                      
                      /*
                      (1.-(vec3(s.y/125.-s.x*s.y/888.+s.y/25000.,s.x/8.-s.y/s.x/2000.-s.y/25000.,1.-s.x/20.+s.y/25000.)
                                   *vec3(1.-s.x/20.,s.x/8.-s.y/s.x/2000.,s.y/35.-s.x*s.y/888.)
                                   *vec3(s.y/40.-s.x*s.y/888.,1.-s.x/21.,s.x/6.-s.y/s.x/2000.)));
                      */
                      if(Inherited)o*=1.-colorAccumulator.x/colorAccumulator.y*3.;

          if(colorInverter==true){
                      o.r*=-sin(time);
                      o.g*=abs(-sin(time*gr));
                      o.b*=-sin(time*1./gr);
                        }
                            o=beta*o;
                                if(remediatedColors)
                                {
                                o/= max(max(o.r,o.g),o.b);
                                 o=o*.5+.5;
                                 }
  float isBlack =1.;//or black
  if (starship.x==0.0&&starship.x==starship.y&& starship.y==starship.z&&starship.w>3.5/255.)isBlack=0.;
                      
                      float isGrey =0.;

                      if (starship.x==starship.y&& starship.y==starship.z&&starship.x<.51&&starship.x>.49)isGrey=starship.x;

                      
                      float spirographTranslucer = 1.;
                    //  if (starship.x!=0.&&starship.x!=1.&&starship.x!=.5&&(starship.x+starship.y>=255.-3.5||starship.y+starship.z>=255.-3.5||starship.z+starship.x>=255.-3.5)&&starship.w==1.)spirographTranslucer=.75-(starship.x+starship.y+starship.z)/2.;
                      
                      
                      
o=clamp((clamp(o-1000000000000.*oo,0.,1.)+oo)-(starship.x+starship.y+starship.z)*7.*starship.w,0.,1.)+starship.xyz*spirographTranslucer;
                      o*=isBlack;
                      o+=(isBlack-1.)*100.;
                      o+=isGrey;
                      if(length(p-coords.yx)<2.*sqrt(2.)/min(resolution.x,resolution.y)*zoom)o=vec3(hyperCoreOUTPUT/255.*4.,cored/255.*4.,255.);
return clamp(o,0.,1.);}

                      
                      
                      
                      
  
  
  
  vec3 MannyWoManny(vec2 p,vec2 t,vec2 d){

                               float time2 = t.x;
                               float c=0.,k=0.,l=0.,x=0.,e=0.;
                               vec3 head=vec3(0.);
              if(abs(p.y*p.y)+abs(p.x*p.x)<700.){
                 // t.y=t.x;
                           //vv body vv
                               vec2 g=p;
                                ///g.x+=(coz(t.y)-1.)/2.*.5;
                               vec2 z=g;
                               if(abs(p.y)<6.)for (int f=0;f<30;f+=1)if(abs(z.x+z.y)>(20.-t.y*50.)&&f>4)x+=z.y/20000000.;
                               else {z=2.*vec2(-1./((z.x*z.x-(1.44+t.x*.44)*z.y*z.y)
                            -g.x*(1.2+t.y*.2)+d.x),
                       ((1.2-t.y*.8)*z.x*z.y-(1.2+t.y*.2)*g.y+d.y));
  //The Holy Bible Revelation 21:16 "The city was laid out like a square, as long as it was wide.
  //He measured the city with the rod and found it to be 12,000 stadia in length,
   //and as wide and high as it is long. The angel measured the wall using human measurement, and it was 144 cubits thick.
                                                         z.x=pow(abs(z.x),(.777+t.y*.277));}



          //legs
                               g=p/2.;
                              // g.x-=.5;
                               z=g;
                               if(g.x>.75&&g.x<1.7&&abs(g.y*g.x)<.54)for(int f=0;f<8;f+=1)if(abs(z.x)>52.&&f>1)c=abs(z.x)/1000000.;
                               else {z=3.*vec2(-1./((z.x*z.x-z.y*z.y)-g.x+d.x),(77.0*z.x*z.y-(2.+t.y)*g.y+d.y));
                                     z.y = -1./z.y;}
                 //vv head vv
                                       g=p*-leaf;
                                       z=g;
                          if(abs(p.y)<4.)for (int f=0;f<21;f+=1)if(abs(z.y)>21.&&(f==int(floor(.8+t.y*.4)))){l=0.;break;}
                               else if(abs(z.y)>19.&&(f>4))l=1.;
                                       else{z=vec2(-1./((z.x*z.x-z.y*z.y)-g.x),2.0*z.x*z.y-g.y);
                            z*=pow(abs(z.x),(z.x-t.y*-z.x));
                            l = clamp(1.-abs(z.y)*6.,0.,1.);
                            if(z.x>-.1&&f!=0)l=clamp(1.-z.x*49.,0.,1.);
                               }
                                      

                                     
      }

                           return vec3(l)+vec3(c,x+c/2.,0.)*10000.+clamp(vec3(0.,(k+e)*10.,(k+e)*10.),0.,1.);}


vec3 robeL(vec2 g, vec2 t, vec2 d){
     float r=0.;
     g.x*=(1.2+t.y*.2);
     g.x+=(-.45-t.y*.5);
     g.y/=1.14;
     vec2 z=g.xy;
     if(g.x>.5 &&abs(g.y)<(.8-t.y*1.0))for(int f=0;f<70;f+=1)if(abs(z.y)>11.&&f>7)r=clamp(1.4-abs(g.x-2.3)
                      *(1.-abs(g.y*g.x))-.07//(un)comment this line to toggle sleeves
                     ,0.,1.);
     else{
         z=1.1*vec2(-2./(((1.2+t.x*.1)*z.x*z.x-1.8*z.y*z.y)-g.x+d.x),(3.*z.x*z.y-(1.4+t.y*.1)*g.y+d.y));;
         z.x=pow(abs(z.x),.8);}
     return vec3(r);
     }


     vec3 heartZoom(vec2 p, vec2 t){
 
 float c=3.58;
 p.y*=-1.;
 p*=2.;
 if(colorCombo==18) p*=4.*c;
 vec2 z=p;
const float iterations =  21.*21.;
for (float f=0.;f<iterations;f+=1.)
if(f>iterations*(lerp(time/15.)*.5+.5)){if(length(z)>5.&&colorCombo!=18)break;
else{
if(colorCombo==18)if(length(z)>c)z/=c;
z=vec2(z.x*z.x-z.y*z.y-p.x+t.x, 2.0*z.x*z.y-p.y+t.y);//this is {s=s^2-p}

}}

return
      (vec3(z.x*z.y,z.x+.144,z.y-.0333*(1.-z.y))+.1)
      /length(z);

 
 }
  
  
  
                      
                      vec3 excelsior(vec2 p,vec2 t){
          t.x*=-1.;
           p*=gr;
           vec2 s=p;
           vec3 l=vec3(.1,.5,1.1);
               for (int f=0;f<21;f+=1)
           if(abs(s.y)<21.){
            s=vec2(((s.x*s.x-s.y*s.y)-p.x),(2.0*s.x*s.y-p.y));

               s.x=pow(abs(s.x),-sin(t.x*2.+3.14))*sign(-s.x*-sin(-t.x*2.+3.14));
                                l=vec3(2.-abs(s.y*-sin(-t.x))*19.)*-sin(-t.x);//middle horn
               if(s.x>-.1)l=vec3(-sin(t.x)-(s.x*(100.-100.*-sin(t.x*2.-3.14))*-sin(t.x)));
               }
           vec3 ret = 1./l;
       return ret;
                               }

     vec3 man(vec2 p,vec2 t) {
         p*=-1.75;
         vec2 s = p;
         float l=0.;
         float flip=-t.x;
         if (flip<0.) p = -p;
          vec3 ret = vec3(1.*zin(time));

         if (abs(p.x*p.x+p.y*p.y)<2.0)
         {for (int t = 0; t < 30; t++) {
                 s = vec2(((s.x * s.x - s.y * s.y) +flip* p.x), (s.x * s.y + flip*p.y));
                 if(flip<1.)
                 s.x = 1./pow(s.x,flip)*sign(s.x*flip);
                 else s.x = 1./s.x;
           l = length(s);

         if (l >20.0&&t!=0)
         {ret= vec3(-1.*zin(time));
             break;
             }
         }

             }

         else ret = vec3(0.);
         
        return ret;
 }


     vec3 eagle(vec2 p,vec2 t) {
     p*=10.;
         vec2 s = p;
         float d = 0.0, l=0.;
         vec3 ret = vec3(0.);

         float flip=-t.x;
         if (flip<0.) p = -p;
         
         if(abs(6.*p.x*p.x+p.y*p.y*2.)<700.0)
         for (int i = 0; i < 30; i++) {
             s=vec2(-(s.x * s.x - s.y * s.y) +flip* p.x, (s.x * s.y + t.y*p.y));
            /* if(b<=.5 ||rate == 0.)
                 s.x = 1./s.x;
             else*/
            if(flip<1.)s.x = 1./pow(s.x,flip)*sign(s.x*flip);
            else s.x=1./s.x;
               s.y = s.x*s.y;
             l = length(s);
             d +=2.;
              if(l >(20.0)&& float(i)>3.&&float(i)>3.)
              {
                 ret =  vec3(1.-sin(d * 0.003)-.5,1.- sin(d * 0.9)-.5,1.- sin(d * 0.1)-.5)*3.;
                 break;
              }
              }
         return vec3(.0);
        }

      vec3 eaglePerched(vec2 p, vec2 t){
            p*=2.5;
            vec2 s=p;
                    float l = 0.;

                    float flip=-t.x;
                    if (flip<0.) p = -p;
                    if(abs((p.x)*(p.x)+(p.y*p.y))<8.&&p.x<0.1)
            for (int f=0;f<20;f+=1)if(abs(s.x+s.y)>20.)l=1.;
            else {s=vec2((s.x*s.x+s.y*s.y+p.x),-(2.0*s.x*s.y-p.y));

                        if(flip<1.)s.x = 1./pow(s.x,flip)*sign(s.x*flip);
                        else s.x=1./s.x;
                  l=-1.;}
            return vec3(l);
        }

      vec3 lion(vec2 p,vec2 t) {
      p*=-3.;
      vec2 s = -p;
          vec3 ret = vec3(0.);
      float flip=-t.x;
      if (flip<0.) p = -p;
          if(p.x*p.x*1.+p.y*p.y*2.<21.) for (int t = 0; t < 50; t++){ if(length(s)<15.||t<3)
      {
          s = vec2(((s.x * s.x - s.y * s.y) +flip* p.x), (2.0* s.x * s.y + flip*p.y));
          s/=2.;
              if(flip<1.) s.x = 1./pow(s.x,flip)*sign(-s.x*flip);
              else s.x=-1./s.x;
            ret=vec3(0.);
      }
      else ret =  vec3(s.y,s.x,s.y*s.x)*zin(time);
      }
          
          return ret;
          }
      
 vec3 ox(vec2 p,vec2 t) {
    p*=1.25;
       vec2 s = p;
       float d = 0.0, l=0.;
         float flip=-t.x;
         vec3 ret = vec3(0.);
         if (flip<0.) p = -p;
         if( (p.x+.25)*(p.x+.25)+p.y*p.y<1.||(p.x>0.&& p.x*p.x+p.y*p.y<7. ))
       for (int t = 0; t < 30; t++) {
         s = vec2(((s.x * s.x - s.y * s.y) -flip* p.x), (3.0* s.x * s.y - flip*p.y));
         if(flip<1.) s.x = 1./pow(s.x,flip)*sign(-s.x*flip);
         else s.x=-1./s.x;
           l = length(s);
         d += l/10.;
         if (l >14.0 &&float(t)  >2.)
         {
         ret = vec3(-sin(d +time*1./gr*2.),-sin(d +time*gr*2.),-sin(d *time*2.));
         break;
         }
       }
       return ret;
     }





        vec3 bride(vec2 p,vec2 t){
                   float c=0.,l=0.,x=0.;
                   vec3 e = vec3(0.);
  if(abs(p.y*p.y)+abs(p.x*p.x)<49.){
    p+= vec2(.8787878787878,0.);
               //vv body vv
                   vec2 g=p/2.;
                  // g.x+=.5;
                   vec2 z=g;
                   for (int f=0;f<70;f+=1)if(abs(z.x+z.y)>20.&&f>4){x+=z.y;break;}
                   else {z=2.*vec2(-1./((z.x*z.x-1.44*z.y*z.y)-g.x*1.2+t.x),(1.21212121212121*z.x*z.y-1.212121212121*g.y+t.y));
                         z.x=pow(abs(z.x),.777-t.x/49.);}
               //vv legs vv
                   g=p/3.5;
                   //g.x-=.5;
                   z=g;
                   for (int f=0;f<70;f+=1)if(abs(z.x+z.y)>200.&&f>4){c=1.;break;}
                   else {z=3.*vec2(-1./((z.x*z.x-z.y*z.y)-g.x+t.x/40.),(77.0*z.x*z.y-2.*g.y+t.y/40.));
                         z.y = -1./z.y;}
               //vv head vv
                   g=p;
                  // g.x-=.1;
                   z=g;
                   for (int f=0;f<10;f+=1)if(abs(z.x+abs(z.y))>27.&&f>4){l=1.;break;}
                   else{z=vec2(-1./((z.x*z.x-z.y*z.y)-g.x+t.x/8.),(2.0*z.x*z.y-g.y+t.y/8.));
                        z*=pow(abs(z.x),z.x);}
                   /*
               //vv mandelbrot\heart vv
                   g=p*2.;
                   g.x-=6.;
                   z=g;
                   for (int f=0;f<50;f+=1)if(abs(z.x+z.y)>20.)break;
                   else {z=vec2(((z.x*z.x-z.y*z.y)-g.x-t.x/4.),(2.0*z.x*z.y-g.y-t.y/4.));
                                if(f>2)k+=0.02;}*/
               //vv eye lights vv
                   g=p;
                   z=g;
                   
                   for (int f=0;f<5;f+=1)if(abs(z.x+z.y)>20.)break;
                   else {z=vec2((1./(z.x*z.x-z.y*z.y)-g.x-t.x/4.),(4.0*z.x*z.y-g.y-t.y/4.));
                         if(f>2)
                         {if(p.y>0.)e+=vec3(0.45,.3,0.);
                            else e+=vec3(0.,.3,.45);
                         }
                         }
}

  return vec3(l+c,l+x+c,c)*10000.+e;}


  vec3 dress(vec2 p,vec2 t){
    p-= vec2(.8787878787878,0.);

  p/=2.5;

   p.x*=1.77;

   p.y*=-1.;
   vec2 z=p;
   float l = 0.;
  const float iterations =  71.;
       for (float f=0.;f<iterations;f+=1.){

               //if(length(z)>c)z/=c;//this refracts the Mandelbrot outwards

           z=2.*vec2(-1./(z.x*z.x-z.y*z.y-p.x+t.x), 2.0*z.x*z.y-p.y+t.y);//this is {s=s^2-p;s.real=-1./s.real}
   z.x=sqrt(abs(z.x));
   if ((p.x-1.)*(p.x-1.)+p.y*p.y*3.<1.5)l=z.x;
  }

   return vec3(l);}
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
                                                                                      
              vec3 tokogae (vec2 p, vec2 t){
                  vec2 s = p*2.;
                   float l=1.;
                  vec3 digorno=vec3(0.);

                   for (int f=0;f<41;f+=1)if(abs(s.y)<5.&&s.x!=0.&&s.y!=0.){
                       
                       s=vec2(s.x+s.y/(s.x*s.x + s.y*s.y), (1./(s.x*s.x + s.y*s.y))-sin(1.-t.x)/2.);//this equation comes from the equation (x-1/((x - y*i)))=x
                  s.y=s.y-log(dot(s.y,s.y))*-sin((1.-t.x)/2.);
                  digorno+=vec3(s.x,s.x/s.y,(s.y/s.x));
                  }
                  else      {
                           
                          digorno-=vec3(s.x*1.4,(s.y*s.x),s.y)/50.;
                          break;
                          }

                  return digorno/4.;
              }


      vec3 TOLTOK (vec2 p, vec2 t){
                                  float precores = 0.49;
                                  if(spirated!=0.) precores = 1.;
                                  if(spirated>-.5) p.y*=-1.;
                                  float cored = log(zoom*3./2.)/log(.5)+1.+precores;
                                  float c = length(p);
                                  float loops=1.;
                                                    vec2 s = p*1.5;
                                  if(!MetaCored)for(int i=1;i<60; i++)if(c<2./3.&&loops<cored){s*=2.;c*=2.;loops++;}else break;
                                  loops=0.;
                                  float hyperCore=0.;
                                  float lfc = length(freed(coords));
                                  if(outerCoresOff) hyperCore=0.;
                                  else if(!MetaCored)hyperCore=cored*2./3.+log(lfc*3./2.)*0.9551195+.25/log(.5);//.9551195 is based on x=log3(x), x = .910239log3(x).  So (1.-.910239)/2+.910239=.9551195 may be incorrect but is close to right.
                                   // if(MetaCored&&morph>=.5)hyperCore*=4./3.;//engage overstable core if dancing

                                  float term=0.;
                                  if(spirated!=0.)term=(1.-lfc)*(3.-2.7182818);//if is spirated then oscillate the function's log between e and 3

                   float l=1.;
                  vec3 digorno=vec3(0.);
                   for (int f=0;f<41;f+=1)if(abs(s.y)<5.){
                                      if(spirated!=0.&&length(s)<2./3.)   s*=length(s)*6.28/(atan(s.y,s.x)+3.14159);

                       if(f>0) s=vec2(s.x+s.y/(s.x*s.x + s.y*s.y), (1./(s.x*s.x + s.y*s.y))+zoom*1.5-1.);//this equation comes from the equation (x-1/((x - y*i)))=x.  This equation has no solutions, but upon feedback it gains solutions (technically this may require other steps too)
                       for (int counter=0;counter<15;counter+=1)if(abs(s.y)<1.5*(1.-zoom*1.5)){
                            s=vec2(s.x*s.x*s.x  - 3.*s.x*s.y*s.y-t.x, -s.y*s.y*s.y+ 3.*s.x*s.x*s.y-t.y);//x**3
                            s.x=log(abs(s.x))/log(3.-term);


                            float d = length(s);
                            if(d<4./3.&&petals!=0.)s=spin2(s,atan(s.y,s.x)*petals/6.);
                            for(int i=0;i<69; i++)if(!MetaCored&&d<2./3.&& loops+float(f)<hyperCore)
                         {
                               float shift=2.;s*=shift;d*=shift;loops++;

                               float wise;
                               if(mod(float(i),4.)==0.)wise=1.;
                               else if(mod(float(i),4.)==1.)wise=-1.;
                               else  if(mod(float(i),4.)==2.)wise= -1.;
                               else  if(mod(float(i),4.)==3.)wise=1.;

                               if(metaCarousel!=0.)s=spin2(s,time*wise*metaCarousel*(1.+petals/6.)*rate);

                            }
                             else break;

                       }else break;


                  l = s.x-l;

                  //s.y=s.y-log(dot(s.y,s.y))*-sin((1.-zoom*1.5)/2.);
                  digorno+=vec3((s.y/s.x),(s.y/s.x)*5.+l*s.y,s.x);
                  }
                      else         digorno-=vec3(s.x*1.4,(s.y*s.x),s.y)/21.;

                  return digorno/8.;
              }


  vec3 TOLTOK1    (vec2 s, vec2 t){
                            s=-s.yx;
                            vec2 p = s;
    vec3 ret = vec3(1.);
      for (int f=0;f<20;f+=1)if(abs(s.y)<30.){
          if (f<10)
          for (int p=0;p<2;p+=1)if(abs(s.y)<(1.-t.x)*2.)
          {
          s=vec2(s.x*s.x*s.x  - 3.*s.x*s.y*s.y, -s.y*s.y*s.y+ 3.*s.x*s.x*s.y);//x**3
              s.x=log(abs(s.x));
              ret+=vec3(s.y/100.-s.x*s.y/888.,s.x/8.-s.y/s.x/2000.,1.-s.x/20.)/20.;
             }
          if (f>3){ s=vec2((s.x+s.y/(s.x*s.x + s.y*s.y)), (1./(s.x*s.x + s.y*s.y)))-abs(p);
          s.y=s.y-log(dot(s.y,s.y))*-sin(1.-t.x);
          ret= vec3(s.y,abs(s.x-s.y),s.y*s.x)/50.;
                    }
      }
      return ret;
}



vec3 xx(vec2 s, vec2 t){
                                   vec2 m =vec2(0.);
                                   if(wheel) m =  s/length(freed(coords))+coords.yx;//this is essentially just p as in the mandelbrot x <== x^2+p

      for (int f=0;f<40;f+=1)if(abs(s.y)<19.){
          s=vec2((s.x*s.x-s.y*s.y)-t.x-m.x, 2.0*s.x*s.y-t.y-m.y);//this is {s^2} (try dividing by 2)
          
  s.x=log(abs(s.x));
}

  return vec3(s.x,s.y,0.);}
vec3 xtol(vec2 s, vec2 t){
                                  float cored=   log(zoom*1.75)/log(.75)+1.;
                                        float h =1.3333333;
                                            float loops=1.;
                                        if(cored>1.&&MetaCored)
                                         {
                                             float c = sqrt(s.y*s.y+s.x*s.x);
                                             c/=h;
                                             {for(int i = 0; i<69+1; i++)if(c<h/2.&&loops<cored){s*=h;c*=h;loops++;}

                                                                                           }
                                         }

                            for (int f=0;f<40;f+=1)if(abs(s.y)<19.){
                            if(mod(float(f),3.)==0.)s=vec2(s.x*s.x*s.x  - 3.*s.x*s.y*s.y, -s.y*s.y*s.y+ 3.*s.x*s.x*s.y);//x**3
                            s=vec2((s.x*s.x-s.y*s.y), 2.0*s.x*s.y);//this is {s^2-p;s.real=-1./s.real}
                                    s.x=log(abs(s.x));

                                    if(MetaCored){
                                        float c = sqrt(s.y*s.y+s.x*s.x);
                                        //for(int i=0;i<69; i++)if(c<2./3.&&i<int(cored)){p*=2.;c*=2.;}
                                        c/=h;
                                        if(c<h/2. &&f<int((cored/2.+log(length(freed(coords))*h/2.)+.5)/2.)){float shift=h;s*=shift;c*=shift;}
                                                                 }
                                                                                      }

                           return vec3(s.y/50.-s.x*s.y/600.,s.x/8.-s.y/s.x/200.,1.-s.x/10.);

                        }

    vec3 acrostic(vec2 t){
      float c=1.44;

        for (int f=0;f<40;f+=1)if(abs(t.x)<1./sqrt(zoom)){
        //  if(length(t)>c)t/=c;

        t=vec2(1./(t.x*t.x-t.y*t.y), 2.0*t.x*t.y);//this is {s=s^2;s.real=-1./s.real}}
//t.x=log(abs(t.x)
    }
    return vec3(t.x,1./t.y,t.x/t.y);

}vec3 horse(vec2 p, vec2 t){ //horse
    float r =0.;
    p.x-=3.;
    p.x*=3.;
       vec2 g=p;
       vec2 z=g;
       if(g.x*g.x+g.y*g.y<4.)for(int f=0;f<23;f+=1)if(abs(z.y)>11.&&f>7)r=1.;
       else{
           z=1.*vec2(2./((1.*z.x*z.x-5.*z.y*z.y)-g.x+t.x),2.*(z.x*z.y-g.y+t.y));;
           z.x=pow(abs(z.x),.8);}
       return vec3(r);
       }
                      vec3 sword(vec2 p,vec2 t){
                                 //sword
                                     vec2 g=p*3.;
                                     g.x+=(lerp(time2dance/22.)+1.)*21.
                                     -7.;
                                     g.x/=1.5;
                                     vec2 z=g;
                                     float d = 0.0;
                                     float u=0.;
                                     vec3 h=vec3(0.);
                                     if (p.x>.7&&g.x>-2.5 && abs(g.y*g.x) <1.77 &&abs(g.y)<2.11111111)for (int i = 0; i < 14; i++) {
                                           z = vec2(1.1/(1.-pow((z.x * z.x - z.y * z.y +1.+ g.x),2.)), -1.77/(2.0 * z.x * z.y + g.y));
                                         u = length(z);
                                         d +=z.x+z.y+20.;
                                         if (u >5.4 && ( i==4||( i==13 )))  h=vec3(-sin(-d*0.0061),-sin(-d * 0.0063),-sin(-d * 0.0069));
                                         
                                   }
                                 return h;
                                 }
                      
                                  vec3 flames (vec2 p){
                                      p.x = -p.x;
                                      p*=1.5;
                                      p.y*=3.;
                                  vec2 s=p;
                                  float l=0.;
                                          float m = 0.;
                                          float k = 0.;
                                          if(abs((p.x)*(p.x)+(p.y*p.y))<50.)
                                  for (int f=0;f<20;f+=1)if(abs(s.x+s.y)>20. && f>1)l=1.;
                                      else{ s=vec2(-1./(s.x*s.x+s.y*s.y+p.x),-(2.0*s.x/s.y+p.y));
                                          m += abs(s.x+s.y);
                                          }
                                      
                                  return vec3(m*l, m*l/400.,-sin(m*gr)*l);}


                          vec3 scroll(vec2 p,    vec2 unleashed) {
                                   p=-p*2.;
                                   float flip=unleashed.x;
                                   if (flip<0.) p = -p;
                                   float r = 0.;

                              vec2 s = p;
                              float d = 0.0, l=0.;
                             if(length(p)<2.) for (int t = 0; t < 20; t++)if (l < 20.||t<4)
                              {
                                  s = vec2(((s.x * s.x - s.y * s.y) +flip* p.x*p.x), (2.0* s.x * s.y + flip*p.y*p.y));
                                  if(flip==-1.)s.x = -1./s.x;
                                  else s.x = pow(s.x,flip)*sign(s.x*flip);
                                  l = length(s);
                                  d += l/40.;
                              }
                              else { r=d ;return vec3(r);}
                              r=0.;
                              return vec3(r);
                          }
                                                                                      
                          
                          vec3 lamp(vec2 p,vec2 unleash) {
                            p.x-=3.;
                            p*=3.;
                            vec2 s = p;
                            float d = 0.0, l=0.;
                              if (!(p.x<-5.)&&abs(p.y)<1.789||unleash.x!=-1.)
                            for (int i = 0; i < 5; i++) {
                              s = vec2(-1./(s.x * s.x - s.y * s.y + p.x),-1./( 2.0 * s.x * s.y + p.y));
                              l = length(s);
                             d +=s.x+s.y+20.;
                               
                              if (l >7.)  return vec3(1.-sin(d * 0.001),1.- sin(d * 0.0015),1.- sin(d * 0.0069));
                            }
                              
                            return vec3(0.0);
                                                                                      }


                                                                                      
                                                                                      
  vec3 body(vec2 p, vec2 t){
    vec3 b = vec3( 0.);
    if(p.x>0.){b = torso(p,t)+musculature(p,t);}
    return b+robe(p,t)+legs(p,t/33.3)+heart(p*2.,t);}
      
vec3 bodyFourCreatureCharacter(vec2 p, vec2 t){
vec3 b = vec3( 0.);
if(p.x>0.){b = torso(p,t)+musculature(p,t);}
return b+robe(p,t)+legs(p,t/33.3);}
      
  vec3 bod(vec2 p, vec2 t){return torso(p,t)+musculature(p,t)+robe(p,t)+legs(p,t/33.3);}
  vec3 manny(vec2 p, vec2 t){
    return shiny(p,t)+body(p,t)
    ;}
  vec3 mannyX(vec2 p, vec2 t){return excelsior(p,vec2(time*metronome,0.));}
  vec3 fourCreatures(vec2 p, vec2 t){
             float inversion = -1.;
            if (wheel)inversion=coz(time);
            vec2 spacing = vec2(5.,3.)*.7;
            p.x+=.5;
            
            vec2 eagleCoord = p+spacing;
            vec2 lionCoord = p+vec2(-spacing.x,spacing.y);
            vec2 oxCoord = p+vec2(spacing.x,-spacing.y);
            vec2 manCoord = p-spacing;
            
            
            return eaglePerched(eagleCoord,vec2(inversion,0.))+body(p+spacing,t)
          +lion(lionCoord,vec2(inversion,0.))+body(p+vec2(-spacing.x,spacing.y),t)
          +ox(oxCoord,vec2(inversion,0.))+body(p+vec2(spacing.x,-spacing.y),t)
          +man(manCoord,vec2(inversion,0.))+body(p-spacing,t)
          ;
}
            vec3 fourCreaturesSmall(vec2 p, vec2 t){
                    float inversion = -1.;
                   if (wheel)inversion=coz(time);
                      vec2 spacing = resolution.yx/min(resolution.x,resolution.y)*2.24;
                     // spacing.x+=resolution.x/min(resolution.x,resolution.y)*.15;
                     
                     
                     vec2 eagleCoord = (p+spacing);
                     vec2 lionCoord = p+vec2(-spacing.x,spacing.y);
                     vec2 oxCoord = p+vec2(spacing.x,-spacing.y);
                     vec2 manCoord = p-spacing;
                          return eaglePerched(eagleCoord,vec2(inversion,0.))+body(eagleCoord*3.,t)+
                      lion( spin2(p+vec2(-spacing.x,spacing.y),coz(-time)/4.),vec2(inversion,0.))+body((p+vec2(-spacing.x,spacing.y))*3.,t)+
                      ox(p+vec2(spacing.x,-spacing.y),vec2(inversion,0.))+body((p+vec2(spacing.x,-spacing.y))*3.,t)+
                      man(p-spacing,vec2(inversion,0.))+body((p-spacing)*3.,t) ;
          }

  //function library: manny body legs robe musculature torso face excelsior shiny lion ox man eagle eaglePerched fourCreatures heart anomalyze spin x

vec3 sevenPillars(vec2 p){
    float pillarHeight = 25./max(resolution.x,resolution.y);
    float screenBase = pillarHeight;

    p.x-=screenBase;
    if(p.x<pillarHeight)
    {
        const float pillarDepth = 3333.;
       float pillars=0.;
       if (p.x>0.) pillars = totalAmp*pillarDepth;
       else pillars = (1./totalAmp);
    if (pillars<0.) pillars=0.;
      p*=pillars;
      vec2 s=p;
                      float l=0.;
                      
                      for (int f=0;f<11;f+=1)if(abs(s.y)<sqrt(pillarDepth)){
                  s=vec2(-1./s.x, 2.0*s.y);//this is from a thought about y=x
                          }
                  return vec3(s.y,s.x,-s.y*s.x);
                  }
    else return vec3(0.);
}
      void main(){
vec2 p=-(vUv.yx-.5)/(resolution.xy/max(resolution.x,resolution.y))*shaderScale/2.;

vec2 spunC=coords.yx;

if(carousel!=0.){spunC*=-1.;spunC=spin2(spunC,-carousel*mod(time*rate,PI2));}
vec2 backGround=p;
if (colorCombo!=20)backGround=freed(p*zoom+spunC);
if(carousel!=0.)backGround=spin2(backGround,carousel*mod(time*rate,PI2));
float xenOctaveFactor =4.;

if(exponentialPetals!=0.)backGround=spin2(vec2(backGround.x,exponentialPetals*backGround.y),
                                                                                                
                                          PI2*pow(2.,
                                                  (xenOctaveFactor-(atan(backGround.x,exponentialPetals*backGround.y)/
                                                                    PI)*xenOctaveFactor-(petals)/
                                                    6.))/pow(2.,xenOctaveFactor));

                   backGround=spin2(backGround,atan(backGround.y,backGround.x)*petals/6.);
                   


vec2 dance = vec2(0.);
                                   vec2 dance2 = vec2(0.);
           if (morph>.5){
                dance = vec2(-sin(time+time2dance), -sin((time+time2dance)*-gr))*zoom+(spunC.yx+.5)*log(pow(zoom,gr))/log(gr)*zoom*.5;
                //heart dance
                float lfc=length(freed(coords));
                   dance2 = vec2(   -abs(lfc/(lfc-zoom)) -lfc/(lfc+zoom)*2./3.,
                                     -((zoom*lfc)/(lfc+zoom)*sign(coords.y)*sign(coords.x)*(1.-lfc*zoom) )
                                       );//clover dance
             }

 vec2 driftCanceller=vec2(dance.x,-dance.y);
                                                                                         
                                                                                         
                                                     vec3 faceFORWARDbuffer = vec3 (1.);
                                                 vec3 zoomer=vec3(0.);
                                                 vec2 t =vec2(lerp2(time),lerp2(time*.618));
                                                t/=2.;
                                 vec2 move = d.yx*volume;
                                 vec2 moveDynamic=vec2(0.);
                                 if(dynamicDance) moveDynamic = (move/5.+t)/2.;
                                 else  moveDynamic = move/4.;
                                 vec3 backgroundFace = vec3(0.);

         if(colorCombo<=10){
                       zoomer=tol(backGround, dance2);
                       if(chirality==3){
                           zoomer+=tol(backGround.yx,dance2);
                           zoomer/=2.;
                           
                       }
                       
                   }
                            
     else if (colorCombo==11||colorCombo==18)zoomer=heartZoom(backGround+driftCanceller, dance);
    // else if (colorCombo==13)zoomer=tokogae(backGround,vec2(zoom));
                                 
     else if (colorCombo==14)zoomer=TOLTOK(backGround,dance2);
     else if (colorCombo==15)zoomer=xx(backGround,dance2);
    // else if (colorCombo==16)zoomer=xtol(backGround,vec2(0.));
                                 
     else if (colorCombo==17){
                       if(Character == 3||Character == 4){
                           faceFORWARDbuffer =faceFORWARD(backGround*3.,t*zoom);
                           zoomer=faceFORWARD(backGround*3.,t*zoom);
                           }
                       else zoomer=faceHeights(backGround,t*zoom);
                       zoomer = clamp(bod(backGround*2.,t*zoom)-zoomer*50.,.0,1.)+zoomer;
                       }
     else if (colorCombo==20){
                       zoomer=vec3(0.);
                       if(Character!=3&&Character != 4)
                           backgroundFace =clamp(face(backGround*1.75-vec2(1.,0.),vec2(0.))+.5,0.,1.);
                       else{
                           if(musicAngelMan==0)backgroundFace =faceFORWARDstatic(backGround*1.75-vec2(1.,0.),vec2(0.));
                        }
                       if(gameOn||scoreLoaded)
                       {    if(Character==3||Character==4&&gameOn) backgroundFace/=1.5;
                           backgroundFace+=.25;
                           }
                       }
    else if (colorCombo==19)zoomer=acrostic(backGround);
    else if (colorCombo==100)zoomer=vec3(.5);

                                                 
                                                 
                                 
         vec2 characterP = p*2.;
                                 
         vec2 characterPSpunToKey=spin2(characterP*vec2(1.,flipStar)/.8,-(//starSpin*mod(time*rate,PI*2.)-
                                                                          twistStar));
                                 
         vec2 characterOnTrailP = characterP;
         if(MannyONtrail==0) characterOnTrailP=spin2(characterOnTrailP,atan(d.y,d.x)-PI*3./2.);//put manny on trail

                                 vec2 characterPStatic = p*2.;

         vec2 fourcreaturePlayerP = p*1.5;
        if(MannyONtrail==0) fourcreaturePlayerP=spin2(fourcreaturePlayerP,atan(d.y,d.x)-PI*3./2.);//put manny on trail

     vec3 creatures=vec3(0.);
    vec3 b=vec3(0.);
     vec3 bridge=vec3(0.);
                                          
    vec3 cloud= vec3(0.);
                                                 float swordSkew = -0.22;
                 
                 if(helm)
                 {bridge=fourCreaturesSmall(characterPStatic,moveDynamic);
                       if(colorCombo==20&&(helm&&(Character==3||Character==4))) cloud=clouds(backGround*4.,moveDynamic);
                       else if(colorCombo==20)cloud=clouds(backGround*1.75-vec2(1.,0.),moveDynamic);
                       else  cloud=clouds(characterPStatic*1.2,moveDynamic);
                                    
                                                     cloud=clamp(cloud,0.,1.);
                                                     }
     if(fourCreats<0){
                       const float brideSize = 24.;
                       creatures=fourCreatures(backGround*8.,t);
                       if(length(backGround*brideSize)>4./3./brideSize)
                            b=bride(backGround*brideSize,zoom*t)+heart(backGround*brideSize,zoom*t);
     }

                 float inversion = -1.;
                 if (wheel)inversion=coz(time);

                   vec3 mny=vec3(0.);
                    vec3 mnyX = vec3(0.);
                                 float angelSize = 1.22112211;

                                 vec3 mannyFace = vec3(0.);
            if(colorCombo!=17&&colorCombo!=20){
                   if(metronome>1.) mnyX = mannyX(characterOnTrailP/2.*1.22112211,vec2(time))+bod(characterOnTrailP,moveDynamic);
                   else if (Character==0){
                       mannyFace = (face(characterOnTrailP*1.22112211,moveDynamic));//,0.,1.);
                       mny=bod(characterOnTrailP,moveDynamic)+shiny(characterOnTrailP*1.22112211,moveDynamic)+clamp(mannyFace,0.,1.);
                   }
                   else if (Character==1){
                       vec2 lerper = vec2(lerp2(time2dance/13.),lerp2(time2dance*gr/13.));
                       mny = MannyWoManny(characterOnTrailP,
                                                        lerper,move/8.
                                                        )+robeL(characterOnTrailP,lerper,move/5.
                                                                )*.95;}
                   else if (Character==2){
                       mny=bride(characterOnTrailP*gr,moveDynamic/7.)+dress(characterOnTrailP*1.5,-moveDynamic/7.)*2.;
                       swordSkew+=.5;}
                   else if (Character==3||Character==4){
                      
                       mny=bod(characterOnTrailP,moveDynamic)+faceFORWARDstatic(characterOnTrailP*angelSize,moveDynamic);
                   }
                   else if (Character==5)mny=lion(fourcreaturePlayerP,vec2(inversion,0.))+bodyFourCreatureCharacter(characterOnTrailP,moveDynamic);
                   else if (Character==6){
                       mny=eaglePerched(fourcreaturePlayerP,vec2(inversion,0.))+bodyFourCreatureCharacter(characterOnTrailP,moveDynamic);
                       swordSkew+=1.;}
                   else if (Character==7)mny=ox(fourcreaturePlayerP,vec2(inversion,0.))+bodyFourCreatureCharacter(characterOnTrailP,moveDynamic);
                   else if (Character==8)mny=man(fourcreaturePlayerP,vec2(inversion,0.))+bodyFourCreatureCharacter(characterOnTrailP,moveDynamic);
                   else if (Character==9)mny=bod(characterOnTrailP,moveDynamic)+heart(characterPSpunToKey*(2.)*pow(-leaf,3.),moveDynamic*3.)+clamp(face(characterOnTrailP*1.22112211,moveDynamic)+heart(characterPSpunToKey*min(resolution.x,resolution.y)/max(resolution.x,resolution.y)
                                                                            /gr,moveDynamic/2.5),0.,1.);
                                                                           // else if (Character==10)mny=sealedMan(characterOnTrailP,moveDynamic);
                                                                         //   else if (Character==11)mny=sealedWoman(characterOnTrailP/1.44,moveDynamic);

           }

                                 
     float heartSize = gr*gr*-leaf;
     vec2 heartShift = vec2(0);

    if (Character==4||Character==3) {heartSize=5.;heartShift=vec2(.5,0.);}
                                                                 else if(Character==2)heartSize=gr;
     if (Character!=9&&colorCombo!=20&&colorCombo!=17){
     vec3 HEART = heart(characterPSpunToKey*heartSize+heartShift,moveDynamic);
     vec3 heartMultiplier = vec3(1.);
     heartMultiplier=HEART.xyz+(1.-length(characterPSpunToKey*heartSize));
    if(length(characterPSpunToKey*heartSize)>0.)heartMultiplier=vec3(1.);
                if(mannyFace.z>0.)heartMultiplier+=mannyFace;
   if(mannyFace.z>0.)heartMultiplier*=mannyFace;
mny+=HEART*heartMultiplier;
                           }
            if(musicAngelMan>0)
                                 {
                       float divisor = 1.;
                       if(gameOn)divisor=1.5;
                       mny+=faceFORWARD(characterOnTrailP*angelSize,moveDynamic)/divisor;
                       }
     mny=clamp(mny,0.,1.);

    vec3 ARTICLE=vec3(0.);
                       /*
    if(articles){
           vec3 HORSE=horse(characterOnTrailP, moveDynamic);
            ARTICLE+=scroll(characterOnTrailP+1.5*vec2(0.,resolution.x/min(resolution.x,resolution.y)),vec2(-1.));
            vec3 SWORD = sword(characterOnTrailP+vec2(swordSkew,0.),vec2(0.));
            vec2 c4 = characterOnTrailP/vec2(1.,2);
             vec3 LAMP = clamp(lamp(c4,vec2(-1.))-(SWORD.x+SWORD.y+SWORD.x)*10.,0.,1.)+SWORD;
             float ls = (SWORD.x+SWORD.y+SWORD.z+LAMP.x+LAMP.y+LAMP.z)*10.;
             mny=clamp(mny-ls*5.,0.,1.)+SWORD+LAMP;

            ARTICLE+=clamp(flames(c4-vec2(.5,0.))-(ls+HORSE.r*3.+clamp(-mannyFace.r-mannyFace.g-mannyFace.b,-2.,.0))*10000.,0.,1.)+SWORD+HORSE+LAMP;
    }
                      */
     
                                 float recenter = 0.;
                                  float rescale = 1.;
                                 if (colorCombo==20&&!(musicAngelMan>0&&(Character==3||Character==4)))
                                 {recenter=2./1.75/(shaderScale)/(resolution.y/min(resolution.x,resolution.y));//may not be exactly centered
                                    rescale = 2.;
                       }

                               vec2  starshipLOOKUP = ((vUv-.5)+vec2(0.,recenter))*rescale+.5;
                                 
    vec4 starship=vec4(0.);
                                 float isBlack =1.;
                                 vec3 starshipMultiplier = vec3(1.);
                                 float isGrey =0.;
                                 float maxColorOfStarship=1.;
                                 float minColorOfStarship=0.00000001;
                                 float spirographTranslucer = 1.;


if(starOnDot!=2){
                                 if (starshipLOOKUP.x<1.&&starshipLOOKUP.y<1.&&starshipLOOKUP.x>0.&&starshipLOOKUP.y>0.)starship = texture2D(STAR,starshipLOOKUP);
                                 
                                 if (starship.x!=0.||starship.y!=0.||starship.z!=0.)maxColorOfStarship=max(max(starship.x,starship.y),starship.z);
                                 if (starship.x!=0.||starship.y!=0.||starship.z!=0.)minColorOfStarship=min(min(starship.x,starship.y),starship.z);

                                 if(mny.z==mny.y&&mny.y==mny.x&&mny.x!=0.&&starship.w>3.5/255.)mny*=starship.xyz-mny.x*.66;

                     starshipMultiplier=starship.xyz+(1.-starship.w);
                     if(starship.w>0.)starshipMultiplier=vec3(1.);
                                 if(mannyFace.z>0.)starshipMultiplier+=mannyFace;
                    if(mannyFace.z>0.)starshipMultiplier*=mannyFace;
                                 
  
    if (starship.x==0.&&starship.x==starship.y&& starship.y==starship.z&&starship.w>3.5/255.)isBlack=starship.x;
                                 if (starship.x==starship.y&& starship.y==starship.z&&starship.x<.51&&starship.x>.49)isGrey=starship.x;

     //if (starship.x!=0.&&starship.x!=1.&&starship.x!=.5&&(starship.x+starship.y>=255.-3.5||starship.y+starship.z>=255.-3.5||starship.z+starship.x>=255.-3.5)&&starship.w==1.)spirographTranslucer=.75-(starship.x+starship.y+starship.z)/2.;
                                 }
                                 vec4 DOTstarship=vec4(0.);
                                 float isBlackDOT =1.;
                                 float spirographTranslucerDOT = 1.;
                                 float DOTmaxColorOfStarship=1.;


                                 float isGreyDOT =0.;

if(starOnDot>=1){
                       float dotstarscale = 1.;
        vec2  DOTstarshipLOOKUP = mod((vUv)-(dotCoord)/2.*resolution.yx/max(resolution.x,resolution.y)-.5+.5/dotstarscale//-.125-.25
                                      ,1.//)*4.
                                      )*dotstarscale;//*-vec2(sign(dotCoord.x),sign(dotCoord.y));

        if (DOTstarshipLOOKUP.x<1.&&DOTstarshipLOOKUP.y<1.&&DOTstarshipLOOKUP.x>0.&&DOTstarshipLOOKUP.y>0.)DOTstarship = texture2D(STAR,DOTstarshipLOOKUP);
        


        if (DOTstarship.x==0.&&DOTstarship.x==DOTstarship.y&& DOTstarship.y==DOTstarship.z&&DOTstarship.w>3.5/255.)isBlackDOT=DOTstarship.x;
        
        if (DOTstarship.x==DOTstarship.y&& DOTstarship.y==DOTstarship.z&&DOTstarship.x<.51&&DOTstarship.x>.49)isGreyDOT=DOTstarship.x;

        
        if(DOTstarship.x!=0.||DOTstarship.y!=0.||DOTstarship.z!=0.)DOTmaxColorOfStarship=max(max(DOTstarship.x,DOTstarship.y),DOTstarship.z);
        

      //  if(DOTstarship.x!=0.&&DOTstarship.x!=1.&&DOTstarship.x!=.5&&(DOTstarship.x+DOTstarship.y>=255.-3.5||DOTstarship.y+DOTstarship.z>=255.-3.5||DOTstarship.z+DOTstarship.x>=255.-3.5)&&DOTstarship.w==1.)spirographTranslucerDOT=.75-(DOTstarship.x+DOTstarship.y+DOTstarship.z)/2.;
      
                   }
                                 vec4 StaRivers=vec4(0.);
                                 if(eden==2||eden==4)
                                 {
                                StaRivers=texture2D(EDEN,vUv);
                                starship *= vec4(0.);
                                }
                                 
                                 float spirographTranslucerStaRivers = 1.;
                                // if (StaRivers.x!=0.&&StaRivers.x!=1.&&StaRivers.x==.5&&(StaRivers.x+StaRivers.y>=255.-3.5||StaRivers.y+StaRivers.z>=255.-3.5||StaRivers.z+StaRivers.x>=255.-3.5)&&StaRivers.w==1.)spirographTranslucerStaRivers=(StaRivers.x+StaRivers.y+StaRivers.z);
                                 
           float isBlackStaRivers =1.;//or black
           if (StaRivers.x==StaRivers.y&& StaRivers.y==StaRivers.z&&StaRivers.x<3.5/255.&&StaRivers.w>3.5/255.)isBlackStaRivers=StaRivers.x;
                                 
                                 float isGreyStaRivers =0.;

                                 if (StaRivers.x==StaRivers.y&& StaRivers.y==StaRivers.z&&StaRivers.x<.51&&StaRivers.x>.49)isGreyStaRivers=StaRivers.x;

                                 
                                 vec3 pillar = vec3(0.);
                                 pillar = sevenPillars(vUv.yx-vec2(0.,.5));
                                 
                        float shipSUM = starship.x+starship.y+starship.z;
                                 vec3 hypnoticHarmonicCircles = vec3(0.);
                                                                 
                                 if(balloonsON!=0.||balloonsONexponential!=0.)
                                 {
                                    if(maxColorOfStarship!=1.) hypnoticHarmonicCircles=clamp(balloons(p)-shipSUM,0.,1.);
                                    else hypnoticHarmonicCircles=balloons(p);
                                }
                                                                 
                                                                 
         vec4 pixelStarship=vec4(0.);
         float pixelShipGrey = 0.;
         vec4 icicles=vec4(0.);

         if (pixelSTARon)
    {
                       vec2 vUvCentered = (vUv.yx-.5);
                       vec2 uVu=-(vUvCentered)/(resolution.xy/max(resolution.x,resolution.y));
                       vec2 uVuMinCenter=-vUvCentered/(min(resolution.x,resolution.y)/resolution.yx);
             pixelStarship = audioEq(uVuMinCenter);
             icicles = waveForm();
             vec4 starBuffer = vec4(0.);
             for (float x = 0.; x<12.;x++) starBuffer+=starns(uVu,x);
             
             if (starBuffer.x==starBuffer.y&& starBuffer.y==starBuffer.z&&isGrey==0.)pixelShipGrey=starBuffer.x;

             pixelStarship += starBuffer;
              
         }
                                                                     
if(length(p)>2.*sqrt(2.)/min(resolution.x,resolution.y)){
                  
                       vec4 ss =clamp(StaRivers*spirographTranslucerStaRivers+DOTstarship*spirographTranslucerDOT+starship*spirographTranslucer
                                      -vec4(vec3(hypnoticHarmonicCircles.x+hypnoticHarmonicCircles.y+hypnoticHarmonicCircles.z),0.),0.,1.);
                       vec4 faceFromShip = vec4(clamp(mannyFace,0.,1.)-backgroundFace*starshipMultiplier,0.);
                       vec4 goodies = vec4(
                                           //mnyX+
                                           hypnoticHarmonicCircles+pillar
                                                    
                    +clamp(mny*starshipMultiplier
                        -(ARTICLE.r+ARTICLE.g+ARTICLE.b)
                           ,0.,1.)
                                                    +ARTICLE
                                                    +b+creatures+bridge
                                                    ,1.);
                       vec3 awayFromTree =  vec3(
                        -(ARTICLE.x+ARTICLE.y+ARTICLE.z)*4.
                    -(hypnoticHarmonicCircles.x+hypnoticHarmonicCircles.y+hypnoticHarmonicCircles.z)*4.
                       -(bridge.x+bridge.y+bridge.z)*4.
                       -(shipSUM)/maxColorOfStarship*starship.w*.5
                                  
                       -(DOTstarship.x+DOTstarship.y+DOTstarship.z)/DOTmaxColorOfStarship*.5*DOTstarship.w
                      -(StaRivers.r+StaRivers.g+StaRivers.b)*StaRivers.w
                       -(creatures.r+creatures.g+creatures.b+b.b+b.g+b.r)*4.
                                                 
                                                -abs( -pixelStarship.r-pixelStarship.g-pixelStarship.b)
                                                 
                                                 );

vec4 tree = vec4( clamp(
                     clamp(
                           cloud+
                           zoomer
                           +awayFromTree
                                              ,0.,1.)
                    +   pixelStarship.xyz
          -vec3((mny.r+mny.b+mny.g)*4.),.0,1.)+icicles.xyz
              ,1.);
        
          vec4 fin = (ss-faceFromShip+goodies+tree+pixelShipGrey*1.5)*isBlack*isBlackStaRivers*isBlackDOT+(isBlack-1.)+(isBlackDOT-1.)+(isBlackStaRivers-1.);
          if(fin.r>.9&&fin.g>.9&&fin.b>.9)fin-=(isGrey+isGreyDOT+pixelShipGrey+isGreyStaRivers)*1.5;
          else if(fin.r<.1&&fin.g<.1&&fin.b<.1)fin+=(isGrey+isGreyDOT+isGreyStaRivers)*1.5;
          vec3 confraculator = vec3(1.);
          if(sparklesON)confraculator=sparkles(p*length(vec2(length(vec2(fin.x,fin.y)),fin.z)));
          
gl_FragColor=fin/vec4(confraculator
                           ,1.);
                       
       //  gl_FragColor= vec4(.5);
                   }
                                else gl_FragColor=vec4(zoomer,1.);

                                         }

</script>
<script src="loadMicrophone.js"></script>

<script src="starshipMod.js"></script>
<script src="hotkeys.js"></script>
<script src="bigTreeOfLife.js"></script>

    </body>
</html>
