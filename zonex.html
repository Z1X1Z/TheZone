<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Zone:X - Sonic Starship</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main.css">
	</head>
	<body>
        
<script src="OFFLINEonlineSwitch.js"></script>


<script>
    function loadScript(url, callback)
    {
        // Adding the script tag to the head as suggested before
        var head = document.head;
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = url;
        // Then bind the event to the callback function.
        // There are several events for cross browser compatibility.
        script.onreadystatechange = callback;
        script.onload = callback;
        // Fire the loading
        head.appendChild(script);
    }
    function takeOff(){loadScript("starshipMod.js",null);}
    let wadLoader="";
    if(window.online)wadLoader ="https://unpkg.com/web-audio-daw";
    else wadLoader="wad.min.js";
    loadScript(wadLoader,takeOff);
</script>

<!--
https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_text_create
-->
<script>
function hk() {
  var x = document.createElement("INPUT");
  x.setAttribute("type", "text");
  x.setAttribute("id", "hotkeys");
  x.setAttribute("placeholder", "Hotkeys!");
  x.setAttribute("oninput", "getKey()");
  document.body.appendChild(x);
}
if(navigator.userAgent.toLowerCase().match(/mobile/i)||navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)
    hk();

let androidGetKey="";
let androidGetKeyLast;

function getKey(){
    androidGetKeyLast = androidGetKey;
    androidGetKey = document.getElementById("hotkeys").value;
 let scan=androidGetKey.length-1;
 if(androidGetKey.length-1==androidGetKeyLast.length) while(androidGetKey[scan]==androidGetKeyLast[scan]&&scan>=0)scan--;
 window.key=androidGetKey[scan];
 }
</script>
PRESS [W] TO disengage dynamic morphing and [A] to engage it again, NUMBER Keys are resolution!
		<div id="container"></div>

		<script id="vertexShader" type="x-shader/x-vertex">

			varying vec2 vUv;
        		uniform vec2 coords;
       			uniform vec2 resolution;

			void main()	{

				vUv = uv;
				gl_Position = vec4( position, 1.0 );
			}
		</script>

		<script id="fragmentShader" type="x-shader/x-fragment">

			varying vec2 vUv;
			uniform vec2 coords;
       			uniform vec2 resolution;
			uniform float zoom;
            uniform float time;
            uniform float time2dance;
            uniform int colorCombo;



void main(){

	vec2 p=-((vUv.yx)-.5)/(resolution.xy/min(resolution.x,resolution.y))*7.*zoom;
            vec2 t=abs((coords.yx*vec2(-sin(time2dance/2.+time),-cos(time2dance/2.+time))*2.)*.5*log(pow(zoom,1.618))*zoom);
            //p.x+=.5;
            p+=coords.yx;
            p.y*=-1.;
            p+=t;
            vec2 z=p;
            vec3 h=vec3(0.);
            if (colorCombo!=1)t=vec2(0.);
            const int cycles = 300;
            for (int f=0;f<cycles;f+=1)if(abs(z.y)>10.)h=vec3(0.);
            else {z=vec2(((z.x*z.x-z.y*z.y)-p.x+t.x),(2.0*z.x*z.y-p.y+t.y));//mandelbrot loop factored into real and imaginary components from z<=z^2-g
                  h+=(vec3(z.x*z.y,z.x,z.y)+.3)*2./float(cycles);}
                gl_FragColor=vec4(h,1.);
    }

		</script>
        <script>window.zoomCageSize=2.4; window.spiroRainbow = true;
</script>

        
	</body>
</html>
